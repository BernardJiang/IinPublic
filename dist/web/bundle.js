(()=>{var n={7(n){"use strict";var e,t="object"==typeof Reflect?Reflect:null,r=t&&"function"==typeof t.apply?t.apply:function(n,e,t){return Function.prototype.apply.call(n,e,t)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:function(n){return Object.getOwnPropertyNames(n)};var o=Number.isNaN||function(n){return n!=n};function i(){i.init.call(this)}n.exports=i,n.exports.once=function(n,e){return new Promise(function(t,r){function o(t){n.removeListener(e,i),r(t)}function i(){"function"==typeof n.removeListener&&n.removeListener("error",o),t([].slice.call(arguments))}h(n,e,i,{once:!0}),"error"!==e&&function(n,e){"function"==typeof n.on&&h(n,"error",e,{once:!0})}(n,o)})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(n){if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}function c(n){return void 0===n._maxListeners?i.defaultMaxListeners:n._maxListeners}function u(n,e,t,r){var o,i,a,u;if(s(t),void 0===(i=n._events)?(i=n._events=Object.create(null),n._eventsCount=0):(void 0!==i.newListener&&(n.emit("newListener",e,t.listener?t.listener:t),i=n._events),a=i[e]),void 0===a)a=i[e]=t,++n._eventsCount;else if("function"==typeof a?a=i[e]=r?[t,a]:[a,t]:r?a.unshift(t):a.push(t),(o=c(n))>0&&a.length>o&&!a.warned){a.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=n,A.type=e,A.count=a.length,u=A,console&&console.warn&&console.warn(u)}return n}function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},o=A.bind(r);return o.listener=t,r.wrapFn=o,o}function d(n,e,t){var r=n._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?t?[o.listener||o]:[o]:t?function(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}(o):p(o,o.length)}function f(n){var e=this._events;if(void 0!==e){var t=e[n];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function p(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function h(n,e,t,r){if("function"==typeof n.on)r.once?n.once(e,t):n.on(e,t);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(e,function o(i){r.once&&n.removeEventListener(e,o),t(i)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(n){if("number"!=typeof n||n<0||o(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");a=n}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||o(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(n){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var o="error"===n,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[n];if(void 0===c)return!1;if("function"==typeof c)r(c,this,e);else{var u=c.length,A=p(c,u);for(t=0;t<u;++t)r(A[t],this,e)}return!0},i.prototype.addListener=function(n,e){return u(this,n,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(n,e){return u(this,n,e,!0)},i.prototype.once=function(n,e){return s(e),this.on(n,l(this,n,e)),this},i.prototype.prependOnceListener=function(n,e){return s(e),this.prependListener(n,l(this,n,e)),this},i.prototype.removeListener=function(n,e){var t,r,o,i,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(t=r[n]))return this;if(t===e||t.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[n],r.removeListener&&this.emit("removeListener",n,t.listener||e));else if("function"!=typeof t){for(o=-1,i=t.length-1;i>=0;i--)if(t[i]===e||t[i].listener===e){a=t[i].listener,o=i;break}if(o<0)return this;0===o?t.shift():function(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}(t,o),1===t.length&&(r[n]=t[0]),void 0!==r.removeListener&&this.emit("removeListener",n,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(n){var e,t,r;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[n]&&(0===--this._eventsCount?this._events=Object.create(null):delete t[n]),this;if(0===arguments.length){var o,i=Object.keys(t);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=t[n]))this.removeListener(n,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(n,e[r]);return this},i.prototype.listeners=function(n){return d(this,n,!0)},i.prototype.rawListeners=function(n){return d(this,n,!1)},i.listenerCount=function(n,e){return"function"==typeof n.listenerCount?n.listenerCount(e):f.call(n,e)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},56(n,e,t){"use strict";n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72(n){"use strict";var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var i={},a=[],s=0;s<n.length;s++){var c=n[s],u=r.base?c[0]+r.base:c[0],A=i[u]||0,l="".concat(u," ").concat(A);i[u]=A+1;var d=t(l),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=o(f,r);r.byIndex=s,e.splice(s,0,{identifier:l,updater:p,references:1})}a.push(l)}return a}function o(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var i=r(n=n||[],o=o||{});return function(n){n=n||[];for(var a=0;a<i.length;a++){var s=t(i[a]);e[s].references--}for(var c=r(n,o),u=0;u<i.length;u++){var A=t(i[u]);0===e[A].references&&(e[A].updater(),e.splice(A,1))}i=c}}},113(n){"use strict";n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},214(n,e,t){"use strict";t.d(e,{A:()=>s});var r=t(354),o=t.n(r),i=t(314),a=t.n(i)()(o());a.push([n.id,"/* Reset and Base Styles */\n* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n    line-height: 1.6;\n    color: #333;\n    background-color: #f5f5f5;\n}\n\n/* Loading Screen */\n.loading {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.spinner {\n    width: 50px;\n    height: 50px;\n    border: 4px solid rgba(255, 255, 255, 0.3);\n    border-left: 4px solid white;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-bottom: 20px;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n/* Main App Layout */\n.app-container {\n    display: flex;\n    height: 100vh;\n    overflow: hidden;\n}\n\n.sidebar {\n    width: 300px;\n    background: white;\n    border-right: 1px solid #e0e0e0;\n    display: flex;\n    flex-direction: column;\n}\n\n.main-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    background: #fafafa;\n}\n\n/* Header */\n.header {\n    background: white;\n    padding: 15px 20px;\n    border-bottom: 1px solid #e0e0e0;\n    display: flex;\n    justify-content: between;\n    align-items: center;\n}\n\n.user-info {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.user-avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background: #667eea;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    font-weight: bold;\n}\n\n.chatbot-overlay {\n    position: absolute;\n    bottom: -2px;\n    right: -2px;\n    width: 16px;\n    height: 16px;\n    background: #4CAF50;\n    border-radius: 50%;\n    border: 2px solid white;\n}\n\n/* Chatroom Info */\n.chatroom-info {\n    padding: 15px 20px;\n    background: #f8f9fa;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.chatroom-title {\n    font-weight: bold;\n    margin-bottom: 5px;\n}\n\n.chatroom-status {\n    font-size: 0.9em;\n    color: #666;\n}\n\n/* Conversation List */\n.conversation-list {\n    flex: 1;\n    overflow-y: auto;\n    padding: 10px;\n}\n\n.conversation-item {\n    background: white;\n    border-radius: 8px;\n    padding: 15px;\n    margin-bottom: 10px;\n    border: 1px solid #e0e0e0;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.conversation-item:hover {\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n    transform: translateY(-1px);\n}\n\n.conversation-item.active {\n    border-color: #667eea;\n    background: #f8f9ff;\n}\n\n.conversation-preview {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n}\n\n.conversation-details h4 {\n    margin-bottom: 5px;\n    color: #333;\n}\n\n.conversation-details p {\n    color: #666;\n    font-size: 0.9em;\n}\n\n.conversation-meta {\n    text-align: right;\n    font-size: 0.8em;\n    color: #999;\n}\n\n.unread-badge {\n    background: #667eea;\n    color: white;\n    border-radius: 50%;\n    width: 20px;\n    height: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.8em;\n    margin-top: 5px;\n}\n\n/* Chat Area */\n.chat-area {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.messages-container {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    background: #fafafa;\n}\n\n.message {\n    max-width: 70%;\n    margin-bottom: 15px;\n    display: flex;\n    align-items: flex-start;\n    gap: 10px;\n}\n\n.message.sent {\n    margin-left: auto;\n    flex-direction: row-reverse;\n}\n\n.message-bubble {\n    background: white;\n    padding: 12px 16px;\n    border-radius: 18px;\n    box-shadow: 0 1px 2px rgba(0,0,0,0.1);\n    position: relative;\n}\n\n.message.sent .message-bubble {\n    background: #667eea;\n    color: white;\n}\n\n.message-time {\n    font-size: 0.7em;\n    color: #999;\n    margin-top: 5px;\n}\n\n/* Talk Interface */\n.talk-question {\n    background: white;\n    border-radius: 12px;\n    padding: 20px;\n    margin-bottom: 20px;\n    border: 2px solid #e0e0e0;\n}\n\n.question-text {\n    font-size: 1.1em;\n    margin-bottom: 15px;\n    color: #333;\n}\n\n.answer-options {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.answer-chip {\n    background: #f0f0f0;\n    border: 2px solid transparent;\n    border-radius: 20px;\n    padding: 10px 16px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    text-align: center;\n}\n\n.answer-chip:hover {\n    background: #e8f0fe;\n    border-color: #667eea;\n}\n\n.answer-chip.selected {\n    background: #667eea;\n    color: white;\n    border-color: #5a67d8;\n}\n\n.answer-chip.ignore {\n    background: #f56565;\n    color: white;\n}\n\n.answer-chip.match {\n    background: #48bb78;\n    color: white;\n}\n\n/* Message Input */\n.message-input-area {\n    background: white;\n    border-top: 1px solid #e0e0e0;\n    padding: 15px 20px;\n}\n\n.message-input-container {\n    display: flex;\n    gap: 10px;\n    align-items: flex-end;\n}\n\n.message-input {\n    flex: 1;\n    border: 1px solid #e0e0e0;\n    border-radius: 20px;\n    padding: 10px 15px;\n    outline: none;\n    resize: none;\n    min-height: 40px;\n    max-height: 120px;\n}\n\n.message-input:focus {\n    border-color: #667eea;\n}\n\n.send-button {\n    background: #667eea;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: background 0.2s ease;\n}\n\n.send-button:hover {\n    background: #5a67d8;\n}\n\n.send-button:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n}\n\n/* Tabs */\n.tabs {\n    display: flex;\n    background: white;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.tab {\n    flex: 1;\n    padding: 15px;\n    text-align: center;\n    cursor: pointer;\n    border-bottom: 3px solid transparent;\n    transition: all 0.2s ease;\n}\n\n.tab:hover {\n    background: #f8f9fa;\n}\n\n.tab.active {\n    border-bottom-color: #667eea;\n    color: #667eea;\n    font-weight: bold;\n}\n\n/* Buttons */\n.btn {\n    background: #667eea;\n    color: white;\n    border: none;\n    padding: 10px 20px;\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 1em;\n    transition: all 0.2s ease;\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.btn:hover {\n    background: #5a67d8;\n    transform: translateY(-1px);\n}\n\n.btn:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n}\n\n.btn-secondary {\n    background: #6c757d;\n}\n\n.btn-secondary:hover {\n    background: #5a6268;\n}\n\n.btn-success {\n    background: #28a745;\n}\n\n.btn-success:hover {\n    background: #218838;\n}\n\n.btn-danger {\n    background: #dc3545;\n}\n\n.btn-danger:hover {\n    background: #c82333;\n}\n\n/* Form Elements */\n.form-group {\n    margin-bottom: 20px;\n}\n\n.form-label {\n    display: block;\n    margin-bottom: 5px;\n    font-weight: 500;\n    color: #333;\n}\n\n.form-input {\n    width: 100%;\n    padding: 10px 15px;\n    border: 1px solid #e0e0e0;\n    border-radius: 6px;\n    outline: none;\n    transition: border-color 0.2s ease;\n}\n\n.form-input:focus {\n    border-color: #667eea;\n}\n\n.form-textarea {\n    resize: vertical;\n    min-height: 80px;\n}\n\n/* Notifications */\n.notification {\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 15px 20px;\n    border-radius: 6px;\n    color: white;\n    z-index: 1000;\n    animation: slideIn 0.3s ease;\n}\n\n.notification.success {\n    background: #28a745;\n}\n\n.notification.error {\n    background: #dc3545;\n}\n\n.notification.info {\n    background: #17a2b8;\n}\n\n.notification.warning {\n    background: #ffc107;\n    color: #333;\n}\n\n@keyframes slideIn {\n    from {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n/* Modal */\n.modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0,0,0,0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n}\n\n.modal-content {\n    background: white;\n    border-radius: 8px;\n    padding: 30px;\n    max-width: 500px;\n    width: 90%;\n    max-height: 80vh;\n    overflow-y: auto;\n}\n\n.modal-header {\n    margin-bottom: 20px;\n}\n\n.modal-title {\n    margin-bottom: 10px;\n    color: #333;\n}\n\n.modal-actions {\n    display: flex;\n    gap: 10px;\n    justify-content: flex-end;\n    margin-top: 20px;\n}\n\n/* Talk Creation */\n.talk-editor {\n    background: white;\n    border-radius: 8px;\n    padding: 20px;\n}\n\n.question-editor {\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n    padding: 15px;\n    margin-bottom: 15px;\n}\n\n.answer-editor {\n    display: flex;\n    gap: 10px;\n    margin-bottom: 10px;\n}\n\n.add-answer {\n    background: #f0f0f0;\n    border: 2px dashed #ccc;\n    border-radius: 6px;\n    padding: 10px;\n    text-align: center;\n    cursor: pointer;\n    color: #666;\n    transition: all 0.2s ease;\n}\n\n.add-answer:hover {\n    background: #e8f0fe;\n    border-color: #667eea;\n    color: #667eea;\n}\n\n/* Survey Results */\n.survey-results {\n    background: white;\n    border-radius: 8px;\n    padding: 20px;\n}\n\n.stat-item {\n    display: flex;\n    justify-content: space-between;\n    padding: 10px 0;\n    border-bottom: 1px solid #f0f0f0;\n}\n\n.progress-bar {\n    background: #f0f0f0;\n    border-radius: 10px;\n    height: 8px;\n    overflow: hidden;\n    margin-top: 5px;\n}\n\n.progress-fill {\n    background: #667eea;\n    height: 100%;\n    transition: width 0.3s ease;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .app-container {\n        flex-direction: column;\n    }\n    \n    .sidebar {\n        width: 100%;\n        height: 300px;\n        border-right: none;\n        border-bottom: 1px solid #e0e0e0;\n    }\n    \n    .message {\n        max-width: 85%;\n    }\n    \n    .modal-content {\n        margin: 20px;\n        width: auto;\n    }\n}\n\n/* Error States */\n.error-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n    text-align: center;\n    padding: 20px;\n}\n\n.error-container h1 {\n    color: #dc3545;\n    margin-bottom: 20px;\n}\n\n.error-container p {\n    color: #666;\n    margin-bottom: 30px;\n    max-width: 400px;\n}\n\n/* Utility Classes */\n.hidden { display: none; }\n.flex { display: flex; }\n.flex-column { flex-direction: column; }\n.flex-center { align-items: center; justify-content: center; }\n.text-center { text-align: center; }\n.text-right { text-align: right; }\n.mb-10 { margin-bottom: 10px; }\n.mb-20 { margin-bottom: 20px; }\n.p-10 { padding: 10px; }\n.p-20 { padding: 20px; }","",{version:3,sources:["webpack://./src/web/styles/main.css"],names:[],mappings:"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",sourcesContent:["/* Reset and Base Styles */\r\n* {\r\n    box-sizing: border-box;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nbody {\r\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\r\n    line-height: 1.6;\r\n    color: #333;\r\n    background-color: #f5f5f5;\r\n}\r\n\r\n/* Loading Screen */\r\n.loading {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 100vh;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n}\r\n\r\n.spinner {\r\n    width: 50px;\r\n    height: 50px;\r\n    border: 4px solid rgba(255, 255, 255, 0.3);\r\n    border-left: 4px solid white;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n@keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Main App Layout */\r\n.app-container {\r\n    display: flex;\r\n    height: 100vh;\r\n    overflow: hidden;\r\n}\r\n\r\n.sidebar {\r\n    width: 300px;\r\n    background: white;\r\n    border-right: 1px solid #e0e0e0;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.main-content {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: #fafafa;\r\n}\r\n\r\n/* Header */\r\n.header {\r\n    background: white;\r\n    padding: 15px 20px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    display: flex;\r\n    justify-content: between;\r\n    align-items: center;\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.user-avatar {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    background: #667eea;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: white;\r\n    font-weight: bold;\r\n}\r\n\r\n.chatbot-overlay {\r\n    position: absolute;\r\n    bottom: -2px;\r\n    right: -2px;\r\n    width: 16px;\r\n    height: 16px;\r\n    background: #4CAF50;\r\n    border-radius: 50%;\r\n    border: 2px solid white;\r\n}\r\n\r\n/* Chatroom Info */\r\n.chatroom-info {\r\n    padding: 15px 20px;\r\n    background: #f8f9fa;\r\n    border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.chatroom-title {\r\n    font-weight: bold;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.chatroom-status {\r\n    font-size: 0.9em;\r\n    color: #666;\r\n}\r\n\r\n/* Conversation List */\r\n.conversation-list {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 10px;\r\n}\r\n\r\n.conversation-item {\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 15px;\r\n    margin-bottom: 10px;\r\n    border: 1px solid #e0e0e0;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.conversation-item:hover {\r\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n    transform: translateY(-1px);\r\n}\r\n\r\n.conversation-item.active {\r\n    border-color: #667eea;\r\n    background: #f8f9ff;\r\n}\r\n\r\n.conversation-preview {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n}\r\n\r\n.conversation-details h4 {\r\n    margin-bottom: 5px;\r\n    color: #333;\r\n}\r\n\r\n.conversation-details p {\r\n    color: #666;\r\n    font-size: 0.9em;\r\n}\r\n\r\n.conversation-meta {\r\n    text-align: right;\r\n    font-size: 0.8em;\r\n    color: #999;\r\n}\r\n\r\n.unread-badge {\r\n    background: #667eea;\r\n    color: white;\r\n    border-radius: 50%;\r\n    width: 20px;\r\n    height: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 0.8em;\r\n    margin-top: 5px;\r\n}\r\n\r\n/* Chat Area */\r\n.chat-area {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.messages-container {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 20px;\r\n    background: #fafafa;\r\n}\r\n\r\n.message {\r\n    max-width: 70%;\r\n    margin-bottom: 15px;\r\n    display: flex;\r\n    align-items: flex-start;\r\n    gap: 10px;\r\n}\r\n\r\n.message.sent {\r\n    margin-left: auto;\r\n    flex-direction: row-reverse;\r\n}\r\n\r\n.message-bubble {\r\n    background: white;\r\n    padding: 12px 16px;\r\n    border-radius: 18px;\r\n    box-shadow: 0 1px 2px rgba(0,0,0,0.1);\r\n    position: relative;\r\n}\r\n\r\n.message.sent .message-bubble {\r\n    background: #667eea;\r\n    color: white;\r\n}\r\n\r\n.message-time {\r\n    font-size: 0.7em;\r\n    color: #999;\r\n    margin-top: 5px;\r\n}\r\n\r\n/* Talk Interface */\r\n.talk-question {\r\n    background: white;\r\n    border-radius: 12px;\r\n    padding: 20px;\r\n    margin-bottom: 20px;\r\n    border: 2px solid #e0e0e0;\r\n}\r\n\r\n.question-text {\r\n    font-size: 1.1em;\r\n    margin-bottom: 15px;\r\n    color: #333;\r\n}\r\n\r\n.answer-options {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n}\r\n\r\n.answer-chip {\r\n    background: #f0f0f0;\r\n    border: 2px solid transparent;\r\n    border-radius: 20px;\r\n    padding: 10px 16px;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n    text-align: center;\r\n}\r\n\r\n.answer-chip:hover {\r\n    background: #e8f0fe;\r\n    border-color: #667eea;\r\n}\r\n\r\n.answer-chip.selected {\r\n    background: #667eea;\r\n    color: white;\r\n    border-color: #5a67d8;\r\n}\r\n\r\n.answer-chip.ignore {\r\n    background: #f56565;\r\n    color: white;\r\n}\r\n\r\n.answer-chip.match {\r\n    background: #48bb78;\r\n    color: white;\r\n}\r\n\r\n/* Message Input */\r\n.message-input-area {\r\n    background: white;\r\n    border-top: 1px solid #e0e0e0;\r\n    padding: 15px 20px;\r\n}\r\n\r\n.message-input-container {\r\n    display: flex;\r\n    gap: 10px;\r\n    align-items: flex-end;\r\n}\r\n\r\n.message-input {\r\n    flex: 1;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 20px;\r\n    padding: 10px 15px;\r\n    outline: none;\r\n    resize: none;\r\n    min-height: 40px;\r\n    max-height: 120px;\r\n}\r\n\r\n.message-input:focus {\r\n    border-color: #667eea;\r\n}\r\n\r\n.send-button {\r\n    background: #667eea;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 50%;\r\n    width: 40px;\r\n    height: 40px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: background 0.2s ease;\r\n}\r\n\r\n.send-button:hover {\r\n    background: #5a67d8;\r\n}\r\n\r\n.send-button:disabled {\r\n    background: #ccc;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/* Tabs */\r\n.tabs {\r\n    display: flex;\r\n    background: white;\r\n    border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.tab {\r\n    flex: 1;\r\n    padding: 15px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n    border-bottom: 3px solid transparent;\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.tab:hover {\r\n    background: #f8f9fa;\r\n}\r\n\r\n.tab.active {\r\n    border-bottom-color: #667eea;\r\n    color: #667eea;\r\n    font-weight: bold;\r\n}\r\n\r\n/* Buttons */\r\n.btn {\r\n    background: #667eea;\r\n    color: white;\r\n    border: none;\r\n    padding: 10px 20px;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    font-size: 1em;\r\n    transition: all 0.2s ease;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.btn:hover {\r\n    background: #5a67d8;\r\n    transform: translateY(-1px);\r\n}\r\n\r\n.btn:disabled {\r\n    background: #ccc;\r\n    cursor: not-allowed;\r\n    transform: none;\r\n}\r\n\r\n.btn-secondary {\r\n    background: #6c757d;\r\n}\r\n\r\n.btn-secondary:hover {\r\n    background: #5a6268;\r\n}\r\n\r\n.btn-success {\r\n    background: #28a745;\r\n}\r\n\r\n.btn-success:hover {\r\n    background: #218838;\r\n}\r\n\r\n.btn-danger {\r\n    background: #dc3545;\r\n}\r\n\r\n.btn-danger:hover {\r\n    background: #c82333;\r\n}\r\n\r\n/* Form Elements */\r\n.form-group {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.form-label {\r\n    display: block;\r\n    margin-bottom: 5px;\r\n    font-weight: 500;\r\n    color: #333;\r\n}\r\n\r\n.form-input {\r\n    width: 100%;\r\n    padding: 10px 15px;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 6px;\r\n    outline: none;\r\n    transition: border-color 0.2s ease;\r\n}\r\n\r\n.form-input:focus {\r\n    border-color: #667eea;\r\n}\r\n\r\n.form-textarea {\r\n    resize: vertical;\r\n    min-height: 80px;\r\n}\r\n\r\n/* Notifications */\r\n.notification {\r\n    position: fixed;\r\n    top: 20px;\r\n    right: 20px;\r\n    padding: 15px 20px;\r\n    border-radius: 6px;\r\n    color: white;\r\n    z-index: 1000;\r\n    animation: slideIn 0.3s ease;\r\n}\r\n\r\n.notification.success {\r\n    background: #28a745;\r\n}\r\n\r\n.notification.error {\r\n    background: #dc3545;\r\n}\r\n\r\n.notification.info {\r\n    background: #17a2b8;\r\n}\r\n\r\n.notification.warning {\r\n    background: #ffc107;\r\n    color: #333;\r\n}\r\n\r\n@keyframes slideIn {\r\n    from {\r\n        transform: translateX(100%);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n/* Modal */\r\n.modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0,0,0,0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 30px;\r\n    max-width: 500px;\r\n    width: 90%;\r\n    max-height: 80vh;\r\n    overflow-y: auto;\r\n}\r\n\r\n.modal-header {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.modal-title {\r\n    margin-bottom: 10px;\r\n    color: #333;\r\n}\r\n\r\n.modal-actions {\r\n    display: flex;\r\n    gap: 10px;\r\n    justify-content: flex-end;\r\n    margin-top: 20px;\r\n}\r\n\r\n/* Talk Creation */\r\n.talk-editor {\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 20px;\r\n}\r\n\r\n.question-editor {\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 8px;\r\n    padding: 15px;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.answer-editor {\r\n    display: flex;\r\n    gap: 10px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.add-answer {\r\n    background: #f0f0f0;\r\n    border: 2px dashed #ccc;\r\n    border-radius: 6px;\r\n    padding: 10px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n    color: #666;\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.add-answer:hover {\r\n    background: #e8f0fe;\r\n    border-color: #667eea;\r\n    color: #667eea;\r\n}\r\n\r\n/* Survey Results */\r\n.survey-results {\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 20px;\r\n}\r\n\r\n.stat-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 10px 0;\r\n    border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.progress-bar {\r\n    background: #f0f0f0;\r\n    border-radius: 10px;\r\n    height: 8px;\r\n    overflow: hidden;\r\n    margin-top: 5px;\r\n}\r\n\r\n.progress-fill {\r\n    background: #667eea;\r\n    height: 100%;\r\n    transition: width 0.3s ease;\r\n}\r\n\r\n/* Responsive Design */\r\n@media (max-width: 768px) {\r\n    .app-container {\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .sidebar {\r\n        width: 100%;\r\n        height: 300px;\r\n        border-right: none;\r\n        border-bottom: 1px solid #e0e0e0;\r\n    }\r\n    \r\n    .message {\r\n        max-width: 85%;\r\n    }\r\n    \r\n    .modal-content {\r\n        margin: 20px;\r\n        width: auto;\r\n    }\r\n}\r\n\r\n/* Error States */\r\n.error-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 100vh;\r\n    text-align: center;\r\n    padding: 20px;\r\n}\r\n\r\n.error-container h1 {\r\n    color: #dc3545;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.error-container p {\r\n    color: #666;\r\n    margin-bottom: 30px;\r\n    max-width: 400px;\r\n}\r\n\r\n/* Utility Classes */\r\n.hidden { display: none; }\r\n.flex { display: flex; }\r\n.flex-column { flex-direction: column; }\r\n.flex-center { align-items: center; justify-content: center; }\r\n.text-center { text-align: center; }\r\n.text-right { text-align: right; }\r\n.mb-10 { margin-bottom: 10px; }\r\n.mb-20 { margin-bottom: 20px; }\r\n.p-10 { padding: 10px; }\r\n.p-20 { padding: 20px; }"],sourceRoot:""}]);const s=a},229(n,e,t){n.exports=t(827)},314(n){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,r,o,i){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<n.length;u++){var A=[].concat(n[u]);r&&a[A[0]]||(void 0!==i&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=i),t&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=t):A[2]=t),o&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=o):A[4]="".concat(o)),e.push(A))}},e}},354(n){"use strict";n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */");return[e].concat([i]).join("\n")}return[e].join("\n")}},540(n){"use strict";n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},659(n){"use strict";var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},736(n){function e(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=736,n.exports=e},825(n){"use strict";n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},827(n,e,t){n=t.nmd(n),function(){function e(n,r){return r?t(736)(n):n.slice?e[o(n)]:function(t,r){n(t={exports:{}}),e[o(r)]=t.exports};function o(n){return n.split("/").slice(-1).toString().replace(".js","")}}var r=n;e(function(n){String.random=function(n,e){var t="";for(n=n||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";n-- >0;)t+=e.charAt(Math.floor(Math.random()*e.length));return t},String.match=function(n,e){var t,r;return"string"==typeof n&&("string"==typeof e&&(e={"=":e}),n===(t=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||r===e["="]&&(t=e["*"]||e[">"],n.slice(0,(t||"").length)===t||r===e["*"]&&(r!==e[">"]&&r!==e["<"]?n>=e[">"]&&n<=e["<"]:r!==e[">"]&&n>=e[">"]||r!==e["<"]&&n<=e["<"])))},String.hash=function(n,e){if("string"==typeof n){if(e=e||0,!n.length)return e;for(var t=0,r=n.length;t<r;++t)e=(e<<5)-e+n.charCodeAt(t),e|=0;return e}};var e,t,r,o,i,a,s=Object.prototype.hasOwnProperty;Object.plain=function(n){return!!n&&(n instanceof Object&&n.constructor===Object||"Object"===Object.prototype.toString.call(n).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(n,e){for(var t in n)if(s.call(n,t)&&(!e||-1==e.indexOf(t)))return!1;return!0},Object.keys=Object.keys||function(n){var e=[];for(var t in n)s.call(n,t)&&e.push(t);return e},t=setTimeout,r=0,o=0,i=typeof setImmediate!=""+e&&setImmediate||function(n,r){return typeof MessageChannel==""+e?t:((n=new MessageChannel).port1.onmessage=function(n){""==n.data&&r()},function(e){r=e,n.port2.postMessage("")})}(),a=t.check=t.check||typeof performance!=""+e&&performance||{now:function(){return+new Date}},t.hold=t.hold||9,t.poll=t.poll||function(n){t.hold>=a.now()-r&&o++<3333?n():i(function(){r=a.now(),n()},o=0)},function(){var n,e=setTimeout,t=e.turn=e.turn||function(n){1==r.push(n)&&o(a)},r=t.s=[],o=e.poll,i=0,a=function(){(n=r[i++])&&n(),i!=r.length&&99!=i||(r=t.s=r.slice(i),i=0),r.length&&o(a)}}(),function(){var n,e=setTimeout,t=e.turn;(e.each=e.each||function(e,r,o,i){i=i||9,function a(s,c,u){if(c=(s=(e||[]).splice(0,i)).length){for(var A=0;A<c&&n===(u=r(s[A]));A++);if(n===u)return void t(a)}o&&o(u)}()})()}()})(e,"./shim"),e(function(n){n.exports=function n(e,t,r){if(!e)return{to:n};var o="function"==typeof t;if(e=(this.tag||(this.tag={}))[e]||o&&(this.tag[e]={tag:e,to:n._={next:function(n){var e;(e=this.to)&&e.next(n)}}}),o){var i={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:t,the:e,on:this,as:r};return(i.back=e.last||e).to=i,e.last=i}return(e=e.to)&&void 0!==t&&e.next(t),e}})(e,"./onto"),e(function(n){n.exports=function(n){return null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n&&n!=1/0&&n!=-1/0&&n==n||!!n&&"string"==typeof n["#"]&&1===Object.keys(n).length&&n["#"]}})(e,"./valid"),e(function(n){function t(){var n=+new Date;return s<n?(i=0,s=n+t.drift):s=n+(i+=1)/a+t.drift}e("./shim"),t.drift=0;var r,o=-1/0,i=0,a=999,s=o;t.is=function(n,e,t){var r=e&&n&&n._&&n._[">"]||t;if(r)return"number"==typeof(r=r[e])?r:o},t.ify=function(n,e,t,o,i){(n=n||{})._=n._||{},i&&(n._["#"]=i);var a=n._[">"]||(n._[">"]={});return r!==e&&"_"!==e&&("number"==typeof t&&(a[e]=t),r!==o&&(n[e]=o)),n},n.exports=t})(e,"./state"),e(function(n){e("./shim"),n.exports=function(n){var e={s:{}},t=e.s;n=n||{max:999,age:9e3},e.check=function(n){return!!t[n]&&r(n)};var r=e.track=function(o){var i=t[o]||(t[o]={});return i.was=e.now=+new Date,e.to||(e.to=setTimeout(e.drop,n.age+9)),r.ed&&r.ed(o),i};return e.drop=function(r){e.to=null,e.now=+new Date;var o=Object.keys(t);console.STAT&&console.STAT(e.now,+new Date-e.now,"dup drop keys"),setTimeout.each(o,function(o){var i=t[o];i&&(r||n.age)>e.now-i.was||delete t[o]},0,99)},e}})(e,"./dup"),e(function(n){e("./onto"),n.exports=function(n,e){if(this.on){var r=(this.opt||{}).lack||9e3;if("function"!=typeof n){if(!n)return;var o=n["#"]||n,i=(this.tag||"")[o];if(!i)return;return e&&(i=this.on(o,e),clearTimeout(i.err),i.err=setTimeout(function(){i.off()},r)),!0}if(o=e&&e["#"]||t(9),!n)return o;var a=this.on(o,n,e);return a.err=a.err||setTimeout(function(){a.off(),a.next({err:"Error: No ACK yet.",lack:!0})},r),o}};var t=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(n){function t(n){return n instanceof t?(this._={$:this}).$:this instanceof t?t.create(this._={$:this,opt:n}):new t(n)}t.is=function(n){return n instanceof t||n&&n._&&n===n._.$||!1},t.version=.202,t.chain=t.prototype,t.chain.toJSON=function(){},e("./shim"),t.valid=e("./valid"),t.state=e("./state"),t.on=e("./onto"),t.dup=e("./dup"),t.ask=e("./ask"),function(){function n(r){if(r)if(r.out!==n){var o,i=this.as,c=i.at||i,u=c.$,A=c.dup,l=r.DBG;if((o=r["#"])||(o=r["#"]=s(9)),!A.check(o)){if(A.track(o),o=r._,r._="function"==typeof o?o:function(){},r.$&&r.$===(r.$._||"").$||(r.$=u),r["@"]&&!r.put&&function(n){var e,t=n["@"]||"";if(e=t._)e.acks=(e.acks||0)+1,(e.err=n.err)&&(n["@"]=e["#"],a(e)),e.ok=n.ok||e.ok,e.stop||e.crack||(e.crack=e.match&&e.match.push(function(){f(e)})),f(e);else{var r=(r=n.$)&&(r=r._)&&(r=r.root)&&(r=r.dup);if(!(r=r.check(t)))return;n["@"]=r["#"]||n["@"]}}(r),!c.ask(r["@"],r)){if(l&&(l.u=+new Date),r.put)return void e(r);r.get&&t.on.get(r,u)}l&&(l.uc=+new Date),this.to.next(r),l&&(l.ua=+new Date),r.nts||r.NTS||(r.out=n,c.on("out",r),l&&(l.ue=+new Date))}}else this.to.next(r)}function e(e){if(e){var t=e._||"",i=t.root=((t.$=e.$||"")._||"").root;if(e["@"]&&t.faith&&!t.miss)return e.out=n,void i.on("out",e);t.latch=i.hatch,t.match=i.hatch=[];var s=e.put,A=t.DBG=e.DBG,l=+new Date;if(p=p||l,!s["#"]||!s["."]){A&&(A.p=l),t["#"]=e["#"],t.msg=e,t.all=0,t.stun=1;var d=Object.keys(s);console.STAT&&console.STAT(l,((A||t).pk=+new Date)-l,"put sort");var f,m,v,b,C,y,x,I=0;!function n(i){if(f!=I){if(f=I,!(v=d[I]))return console.STAT&&console.STAT(l,((A||t).pd=+new Date)-l,"put"),void a(t);(b=s[v])?(x=b._)?v!==x["#"]?y=h+g(v)+"soul not same.":(C=x[">"])||(y=h+g(v)+"no state."):y=h+g(v)+"no meta.":y=h+g(v)+"no node.",m=Object.keys(b||{})}if(y)return e.err=t.err=y,void a(t);var p,w=0;for(i=i||0;i++<9&&(p=m[w++]);)if("_"!==p){var k=b[p],S=C[p];if(o===S){y=h+g(p)+"on"+g(v)+"no state.";break}if(!u(k)){y=h+g(p)+"on"+g(v)+"bad "+typeof k+g(k);break}r(k,p,v,S,e),++B}(m=m.slice(w)).length?c(n):(++I,m=null,n(i))}()}}}function r(n,e,t,o,i){var a,s=i._||"",c=s.root,u=c.graph,l=u[t]||d,f=A(l,e,1),p=l[e],h=s.DBG;(a=console.STAT)&&(u[t]&&p||(a.has=(a.has||0)+1));var g=b();if(o>g)return setTimeout(function(){r(n,e,t,o,i)},(a=o-g)>v?v:a),void(console.STAT&&console.STAT((h||s).Hf=+new Date,a,"future"));if(!(o<f)&&(s.faith||o!==f||!(n===p||m(n)<=m(p))||s.miss)){s.stun++;var B=i["#"]+s.all++,C={toString:function(){return B},_:s};C.toJSON=C.toString,c.dup.track(C)["#"]=i["#"],h&&(h.ph=h.ph||+new Date),c.on("put",{"#":C,"@":i["@"],put:{"#":t,".":e,":":n,">":o},ok:i.ok,_:s})}}function i(n){var e;(e=(n._||"").DBG)&&(e.pa=+new Date,e.pm=e.pm||+new Date);var t,r=this.as,o=r.graph,i=n._,s=n.put,c=s["#"],u=s["."],A=s[":"],d=s[">"];n["#"],(t=i.msg)&&(t=t.put)&&(t=t[c])&&l(t,u,d,A,c),o[c]=l(o[c],u,d,A,c),(t=(r.next||"")[c])&&t.on("in",n),a(i),this.to.next(n)}function a(e,t){var r;if(!e.stop&&(e.err||!(0<--e.stun))&&(e.stop=1,r=e.root)){var o=e.match;o.end=1,o===r.hatch&&(!(o=e.latch)||o.end?delete r.hatch:r.hatch=o),e.hatch&&e.hatch(),setTimeout.each(e.match,function(n){n&&n()}),!(t=e.msg)||e.err||t.err||(t.out=n,e.root.on("out",t),C())}}function f(n){n&&n.root&&(n.stun||n.acks!==n.all||n.root.on("in",{"@":n["#"],err:n.err,ok:n.err?o:n.ok||{"":1}}))}t.create=function(e){e.root=e.root||e,e.graph=e.graph||{},e.on=e.on||t.on,e.ask=e.ask||t.ask,e.dup=e.dup||t.dup();var r=e.$.opt(e.opt);return e.once||(e.on("in",n,e),e.on("out",n,e),e.on("put",i,e),t.on("create",e),e.on("create",e)),e.once=1,r},t.on.put=e;var p,h="Error: Invalid graph!",g=function(n){return" '"+(""+n).slice(0,9)+"...' "},m=JSON.stringify,v=2147483647,b=t.state,B=0,C=function(){B>999&&B/-(p-(p=+new Date))>1&&(t.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),C=function(){B=0})}}(),function(){function n(n,e){var t=+new Date,r=n._||{},i=r.DBG=n.DBG,a=n["#"],c=s(9),u=Object.keys(e||"").sort(),d=((e||"")._||"")["#"],f=(u.length,n.$._.root),p=e===f.graph[d];console.STAT&&console.STAT(t,((i||r).gk=+new Date)-t,"got keys"),e&&function n(){t=+new Date;for(var r,h,g,m=0,v={};m<9&&(r=u[m++]);)l(v,r,A(e,r),e[r],d);u=u.slice(m),(h={})[d]=v,v=h,p&&((g=function(){}).ram=g.faith=!0),h=u.length,console.STAT&&console.STAT(t,-(t-(t=+new Date)),"got copied some"),i&&(i.ga=+new Date),f.on("in",{"@":a,"#":c,put:v,"%":h?c=s(9):o,$:f.$,_:g,DBG:i,FOO:1}),console.STAT&&console.STAT(t,+new Date-t,"got in"),h&&setTimeout.turn(n)}(),e||f.on("in",{"@":n["#"]})}t.on.get=function(e,t){var r=t._,i=e.get,a=i["#"],s=r.graph[a],c=i["."],u=(r.next||(r.next={}))[a],d=(e._||{}).DBG=e.DBG;if(d&&(d.g=+new Date),!s)return r.on("get",e);if(c){if(("string"!=typeof c||o===s[c])&&!((u||"").next||"")[c])return void r.on("get",e);s=l({},c,A(s,c),s[c],a)}s&&n(e,s),r.on("get",e)},t.on.get.ack=n}(),t.chain.opt=function(n){n=n||{};var e=this._,r=n.peers||n;return Object.plain(n)||(n={}),Object.plain(e.opt)||(e.opt=n),"string"==typeof r&&(r=[r]),Object.plain(e.opt.peers)||(e.opt.peers={}),r instanceof Array&&(n.peers={},r.forEach(function(t){var r={};r.id=r.url=t,n.peers[t]=e.opt.peers[t]=e.opt.peers[t]||r})),a(n,function n(e){var t=this[e];this&&this.hasOwnProperty(e)||"string"==typeof t||Object.empty(t)?this[e]=t:(!t||t.constructor===Object||t instanceof Array)&&a(t,n)}),e.opt.from=n,t.on("opt",e),e.opt.uuid=e.opt.uuid||function(n){return t.state().toString(36).replace(".","")+String.random(n||12)},this};var o,i,a=function(n,e){Object.keys(n).forEach(e,n)},s=String.random,c=setTimeout.turn,u=t.valid,A=t.state.is,l=t.state.ify,d={};t.log=function(){return!t.log.off&&i.log.apply(i,arguments),[].slice.call(arguments).join(" ")},t.log.once=function(n,e,r){return(r=t.log.once)[n]=r[n]||0,r[n]++||t.log(e)},"undefined"!=typeof window&&((window.GUN=window.Gun=t).window=window);try{void 0!==r&&(r.exports=t)}catch(n){}n.exports=t,(t.window||{}).console=(t.window||{}).console||{log:function(){}},(i=console).only=function(n,e){return i.only.i&&n===i.only.i&&i.only.i++&&(i.log.apply(i,arguments)||e)},t.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(n){e("./root").chain.back=function(n,e){if(-1===(n=n||1)||1/0===n)return this._.root.$;if(1===n)return(this._.back||this._).$;var o=this._;if("string"==typeof n&&(n=n.split(".")),n instanceof Array){for(var i=0,a=n.length,s=o;i<a;i++)s=(s||r)[n[i]];return t!==s?e?this:s:(s=o.back)?s.$.back(n,e):void 0}if("function"==typeof n){var c;for(s={back:o};(s=s.back)&&t===(c=n(s,e)););return c}return"number"==typeof n?(o.back||o).$.back(n-1):this};var t,r={}})(e,"./back"),e(function(n){var t=e("./root");function r(n,e){if(e=e||this.as||n.$._,(!n.$$||this===t.on)&&n.put&&!e.soul){var r=n.put||"",o=r["="]||r[":"],i=e.root,a=i.$.get(r["#"]).get(r["."])._;if("string"==typeof(o=u(o))){if(!(a.echo||(a.echo={}))[e.id]||(i.pass||"")[e.id]){if(s=i.pass){if(s[o+e.id])return;s[o+e.id]=1}(a.echo||(a.echo={}))[e.id]=e,e.has&&(e.link=o);var s,c=i.$.get(a.link=o)._;(c.echo||(c.echo={}))[a.id]=a,((s=e.ask||"")[""]||e.lex)&&c.on("out",{get:{"#":o}}),setTimeout.each(Object.keys(s),function(n,e){n&&(e=s[n])&&e.on("out",{get:{"#":o,".":n}})},0,99)}}else this===t.on&&((a.echo||(a.echo={}))[e.id]=e)}}function o(n,e){var t,r,i=n.put||"",s=a!==i["="]?i["="]:i[":"],c=e.root;if(a===s){if(e.soul&&a!==e.put)return;if(r=(n.$$||n.$||"")._||"",n["@"]&&(a!==r.put||a!==e.put))return;return(t=e.link||n.linked)&&delete(c.$.get(t)._.echo||"")[e.id],e.has&&(e.link=null),e.put=a,void setTimeout.each(Object.keys(e.next||""),function(n,r){(r=e.next[n])&&(t&&delete(c.$.get(t).get(n)._.echo||"")[r.id],r.on("in",{get:n,put:a,$:r.$}))},0,99)}e.soul||n.$$||(t=u(s),r=n.$._||"",(t!==r.link&&(!e.has||r.link)||(c.pass||"")[e.id]&&"string"!=typeof t)&&(delete(r.echo||"")[e.id],o({get:e.get,put:a,$:n.$,linked:n.linked=n.linked||r.link},e)))}function i(n,e){var r=this.as,o=r.$._,i=(o.root,r.get||""),s=(n.put||"")[i["#"]]||"";if(!n.put||"string"==typeof i["."]&&a===s[i["."]]){if(a!==o.put)return;if(!o.soul&&!o.has)return;return o.ack=(o.ack||0)+1,void o.on("in",{get:o.get,put:o.put=a,$:o.$,"@":n["@"]})}(n._||{}).miss=1,t.on.put(n)}t.chain.chain=function(n){var e,r=this,o=r._,i=new(n||r).constructor(r),a=i._;return a.root=e=o.root,a.id=++e.once,a.back=r._,a.on=t.on,a.on("in",t.on.in,a),a.on("out",t.on.out,a),i},t.on.out=function(n){var e,t,r=this.as,o=r.back,s=r.root;if(n.$||(n.$=r.$),this.to.next(n),!r.err){if(e=n.get){if(s.pass&&(s.pass[r.id]=r),r.lex&&Object.keys(r.lex).forEach(function(n){t[n]=r.lex[n]},t=n.get=n.get||{}),e["#"]||r.soul){if(e["#"]=e["#"]||r.soul,n["#"]||(n["#"]=c(9)),o=s.$.get(e["#"])._,e=e["."]){if(A(o.put,e)&&(t=o.ask&&o.ask[e],(o.ask||(o.ask={}))[e]=o.$.get(e)._,o.on("in",{get:e,put:{"#":o.soul,".":e,":":o.put[e],">":d(s.graph[o.soul],e)}}),t))return}else{if(t=o.ask&&o.ask[""],(o.ask||(o.ask={}))[""]=o,a!==o.put&&(o.on("in",o),t))return;n.$=o.$}return s.ask(i,n),s.on("in",n)}if(e["."])return r.get?(n={get:{".":r.get},$:r.$},(o.ask||(o.ask={}))[r.get]=n.$._,o.on("out",n)):(n={get:r.lex?n.get:{},$:r.$},o.on("out",n));if((r.ask||(r.ask={}))[""]=r,r.get)return e["."]=r.get,(o.ask||(o.ask={}))[r.get]=n.$._,o.on("out",n)}return o.on("out",n)}r.on("in",{put:r.put=a,$:r.$})},t.on.in=function(n,e){var t,i=(e=e||this.as).root,c=n.$||(n.$=e.$),A=(c||"")._||s,l=n.put||"",p=l["#"],h=l["."],g=a!==l["="]?l["="]:l[":"],m=l[">"]||-1/0;if(a!==n.put&&(a===l["#"]||a===l["."]||a===l[":"]&&a===l["="]||a===l[">"]))return u(l)?void e.on("in",{$:A.back.$,put:{"#":p=A.back.soul,".":h=A.has||A.get,"=":l,">":d(A.back.put,h)},via:n}):(p=((l||"")._||"")["#"])?(c=e.root.$.get(p),setTimeout.each(Object.keys(l).sort(),function(t){"_"!=t&&a!==(m=d(l,t))&&e.on("in",{$:c,put:{"#":p,".":t,"=":l[t],">":m},VIA:n})})):void console.log("chain not yet supported for",l,"...",n,e);(n.seen||"")[e.id]||((n.seen||(n.seen=function(){}))[e.id]=e,e!==A&&(Object.keys(n).forEach(function(e){l[e]=n[e]},l={}),l.get=e.get||l.get,e.soul||e.has?A.soul&&(l.$=e.$,l.$$=l.$$||A.$):l.$$$=l.$$$||e.$,n=l),o(n,e),(e.soul||n.$$)&&m>=d(i.graph[p],h)&&((l=i.$.get(p)._).put=f(l.put,h,m,g,p)),!A.soul&&m>=d(i.graph[p],h)&&(t=(i.$.get(p)._.next||"")[h])&&(t.put=g,"string"==typeof(l=u(g))&&(t.put=i.$.get(l)._.put||g)),this.to&&this.to.next(n),e.any&&setTimeout.each(Object.keys(e.any),function(t){(t=e.any[t])&&t(n)},0,99),e.echo&&setTimeout.each(Object.keys(e.echo),function(t){(t=e.echo[t])&&t.on("in",n)},0,99),((n.$$||"")._||A).soul&&(t=e.next)&&(t=t[h])&&(l={},Object.keys(n).forEach(function(e){l[e]=n[e]}),l.$=(n.$$||n.$).get(l.get=h),delete l.$$,delete l.$$$,t.on("in",l)),r(n,e))},t.on.link=r,t.on.unlink=o;var a,s={},c=String.random,u=t.valid,A=function(n,e){return n&&Object.prototype.hasOwnProperty.call(n,e)},l=t.state,d=l.is,f=l.ify})(e,"./chain"),e(function(n){var t=e("./root");function r(n){var e=this.at||this.on;if(!n||e.soul||e.has)return this.off();if(n=(n=(n=n.$||n)._||n).id){var t;if(e.map,(t=this.seen||(this.seen={}))[n])return!0;t[n]=!0}}t.chain.get=function(n,e,s){var c,u;if("string"==typeof n){if(0==n.length)return(c=this.chain())._.err={err:t.log("0 length key!",n)},e&&e.call(c,c._.err),c;(c=((l=this._).next||i)[n])||(c=n&&function(n,e){var t=e._,r=t.next,o=e.chain()._;return r||(r=t.next={}),r[o.get=n]=o,e===t.root.$?o.soul=n:(t.soul||t.has)&&(o.has=n),o}(n,this)),c=c&&c.$}else{if("function"==typeof n){if(!0===e)return function(n,e,r,i){var a,s=n._,c=0;(a=s.soul||s.link)?e(a,i,s):s.jam?s.jam.push([e,i]):(s.jam=[[e,i]],n.get(function(n,e){if(!(o===n.put&&!s.root.opt.super&&(a=Object.keys(s.root.opt.peers).length)&&++c<=a)){e.rid(n);var r,i=(i=n.$)&&i._||{},u=0;for(a=s.jam,delete s.jam;r=a[u++];){var A=r[0];r=r[1],A&&A(i.link||i.soul||t.valid(n.put)||((n.put||{})._||{})["#"],r,n,e)}}},{out:{get:{".":!0}}}))}(this,n,0,s),this;var A,l=(c=this)._,d=e||{},f=l.root;d.at=l,d.ok=n;var p={};function h(n,e,r){if(!h.stun&&(!(i=f.pass)||i[A])){var i,a=n.$._,s=(n.$$||"")._,c=(s||a).put,u=!a.has&&!a.soul,g={};if((u||o===c)&&(c=o===((i=n.put)||"")["="]?o===(i||"")[":"]?i:i[":"]:i["="]),"string"==typeof(i=t.valid(c))&&(c=o===(i=f.$.get(i)._.put)?d.not?o:c:i),!d.not||o!==c){if(o===d.stun){if((i=f.stun)&&i.on&&(l.$.back(function(n){if(i.on(""+n.id,g={}),(g.run||0)<h.id)return g}),!g.run&&i.on(""+a.id,g={}),!g.run&&s&&i.on(""+s.id,g={}),h.id>g.run&&(g.stun&&!g.stun.end||(g.stun=i.on("stun"),g.stun=g.stun&&g.stun.last),g.stun&&!g.stun.end)))return void((g.stun.add||(g.stun.add={}))[A]=function(){h(n,e,1)});if(o===c&&(r=0),(i=f.hatch)&&!i.end&&o===d.hatch&&!r){if(p[a.$._.id])return;return p[a.$._.id]=1,void i.push(function(){h(n,e,1)})}p={}}if(f.pass){if(f.pass[A+a.id])return;f.pass[A+a.id]=1}d.on?d.ok.call(a.$,c,a.get,n,e||h):d.v2020?d.ok(n,e||h):(Object.keys(n).forEach(function(e){i[e]=n[e]},i={}),(n=i).put=c,d.ok.call(d.as,n,e||h))}}}return h.at=l,(l.any||(l.any={}))[A=String.random(7)]=h,h.off=function(){h.stun=1,l.any&&delete l.any[A]},h.rid=r,h.id=d.run||++f.once,u=f.pass,(f.pass={})[A]=1,d.out=d.out||{get:{}},l.on("out",d.out),f.pass=u,c}if("number"==typeof n)return this.get(""+n,e,s);if("string"==typeof(u=a(n)))return this.get(u,e,s);(u=this.get.next)&&(c=u(this,n))}return c?(e&&"function"==typeof e&&c.get(e,s),c):((c=this.chain())._.err={err:t.log("Invalid get request!",n)},e&&e.call(c,c._.err),c)};var o,i={},a=t.valid})(e,"./get"),e(function(n){var t=e("./root");function r(n,e){if(e){e=(e._||"").id||e;var r,o=n.root.stun||(n.root.stun={on:t.on}),i={};n.stun||(n.stun=o.on("stun",function(){})),(r=o.on(""+e))&&r.the.last.next(i),i.run>=n.run||o.on(""+e,function(e){if(n.stun.end)return this.off(),void this.to.next(e);e.run=e.run||n.run,e.stun=e.stun||n.stun})}}function o(n){if(n.err)o.end(n.stun,n.root);else if(!n.todo.length&&!n.end&&Object.empty(n.wait)){n.end=1;var e,r=n.$.back(-1)._,i=r.root,a=r.ask(function(e){i.on("ack",e),e.err&&!e.lack&&t.log(e),++s>(n.acks||0)&&this.off(),n.ack&&n.ack(e,this)},n.opt),s=0,c=n.stun;(e=function(){c&&(o.end(c,i),setTimeout.each(Object.keys(c=c.add||""),function(n){(n=c[n])&&n()}))}).hatch=e,n.ack&&!n.ok&&(n.ok=n.acks||9),n.via._.on("out",{put:n.out=n.graph,ok:n.ok&&{"@":n.ok+1},opt:n.opt,"#":a,_:e})}}t.chain.put=function(n,e,a){var A=this,l=A._,d=l.root;(a=a||{}).root=l.root,a.run||(a.run=d.once),r(a,l.id),a.ack=a.ack||e,a.via=a.via||A,a.data=a.data||n,a.soul||(a.soul=l.soul||"string"==typeof e&&e);var f=a.state=a.state||t.state();return"function"==typeof n?(n(function(n){a.data=n,A.put(i,i,a)}),A):a.soul?(a.$=d.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||s,a.ran=a.ran||o,function n(){var e,i,s,A,l,d=a.todo,p=d.pop(),h=p.it;if(p.ref&&p.ref._.id,r(a,p.ref),(A=p.todo)&&(h=h[i=A.pop()],A.length&&d.push(p)),i&&(d.path||(d.path=[])).push(i),!(e=c(h))&&!(l=t.is(h))){if(!Object.plain(h))return void o.err(a,"Invalid data: "+function(n,e){return n&&(e=n.constructor)&&e.name||typeof n}(h)+" at "+(a.via.back(function(n){n.get&&A.push(n.get)},A=[])||A.join("."))+"."+(d.path||[]).join("."));for(var g=a.seen||(a.seen=[]),m=g.length;m--;)if(h===(A=g[m]).it){e=h=A.link;break}}if(i&&e)p.node=u(p.node,i,f,h);else{if(!a.seen)return void o.err(a,"Data at root of graph must be a node (an object).");a.seen.push(s={it:h,link:{},todo:l?[]:Object.keys(h).sort().reverse(),path:(d.path||[]).slice(),up:p}),p.node=u(p.node,i,f,s.link),!l&&s.todo.length&&d.push(s);var v=a.seen.length;function b(n,e){var t=s.link["#"];e&&(e.off(),e.rid(n));var o=t||n.soul||(A=(n.$$||n.$)._||"").soul||A.link||((A=A.put||"")._||"")["#"]||A["#"]||((A=n.put||"")&&n.$$?A["#"]:(A["="]||A[":"]||"")["#"]);!t&&r(a,n.$),o||p.link["#"]?(o||(o=[],(n.$$||n.$).back(function(n){if(A=n.soul||n.link)return o.push(A);o.push(n.get)}),o=o.reverse().join("/")),s.link["#"]=o,!l&&(((a.graph||(a.graph={}))[o]=s.node||(s.node={_:{}}))._["#"]=o),delete a.wait[v],s.wait&&setTimeout.each(s.wait,function(n){n&&n()}),a.ran(a)):(p.wait||(p.wait=[])).push(function(){b(n,e)})}(a.wait||(a.wait={}))[v]="",A=(s.ref=l?h:i?p.ref.get(i):p.ref)._,(A=h&&(h._||"")["#"]||A.soul||A.link)?b({soul:A}):s.ref.get(b,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!d.length)return a.ran(a);a.turn(n)}(),A):(function(n){var e,t=n.via._;n.via=n.via.back(function(t){if(t.soul||!t.get)return t.$;e=n.data,(n.data={})[t.get]=e}),n.via&&n.via._.soul||(n.via=t.root.$.get(((n.data||"")._||"")["#"]||t.$.back("opt.uuid")())),n.via.put(n.data,n.ack,n)}(a),A)},o.end=function(n,e){n.end=a,n.the.to===n&&n===n.the.last&&delete e.stun,n.off()},o.err=function(n,e){(n.ack||a).call(n,n.out={err:n.err=t.log(e)}),n.ran(n)};var i,a=function(){},s=setTimeout.turn,c=t.valid,u=t.state.ify})(e,"./put"),e(function(n){var t=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),n.exports=t})(e,"./index"),e(function(n){var t,r=e("./index");r.chain.on=function(n,e,t,r){var o,i=this,a=i._;if(a.root,"string"==typeof n)return e?(o=a.on(n,e,t||a,r),t&&t.$&&(t.subs||(t.subs=[])).push(o),i):a.on(n);var s=e;return(s=!0===s?{change:!0}:s||{}).not=1,s.on=1,i.get(n,s),i},r.chain.once=function(n,e){if(e=e||{},!n)return function(n,e,t){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(t=n.chain())._.nix=n.once(function(n,e){t._.on("in",this._)}),t._.lex=n._.lex,t}(this);var o,i=this,a=i._,s=a.root,c=(a.put,String.random(7));return i.get(function(i,u,A,l){var d=this,f=d._,p=f.one||(f.one={});function h(g){f.has||f.soul||(f={put:i,get:u}),t===(o=f.put)&&(o=((A.$$||"")._||"").put),"string"!=typeof r.valid(o)||(o=s.$.get(o)._.put)!==t||g?l.stun||""!==p[c]&&(p[c]="",(a.soul||a.has)&&l.off(),n.call(d,o,f.get),clearTimeout(p[c])):p[c]=setTimeout(function(){h(1)},e.wait||99)}l.stun||""!==p[c]&&(!0!==(o=r.valid(i))?"string"!=typeof o&&(clearTimeout((a.one||"")[c]),clearTimeout(p[c]),p[c]=setTimeout(h,e.wait||99)):h())},{on:1}),i},r.chain.off=function(){var n,e=this._,t=e.back;if(t)return e.ack=0,(n=t.next)&&n[e.get]&&delete n[e.get],(n=t.any)&&(delete t.any,t.any={}),(n=t.ask)&&delete n[e.get],(n=t.put)&&delete n[e.get],(n=e.soul)&&delete t.root.graph[n],(n=e.map)&&Object.keys(n).forEach(function(e,r){(r=n[e]).link&&t.root.$.get(r.link).off()}),(n=e.next)&&Object.keys(n).forEach(function(e,t){n[e].$.off()}),e.on("off",{}),this}})(e,"./on"),e(function(n){var t=e("./index"),r=t.chain.get.next;function o(n){this.to.next(n);var e,r=this.as,o=n.$._,i=n.put;(o.soul||n.$$)&&((e=r.lex)&&!String.match(n.get||(i||"")["."],e["."]||e["#"]||e)||t.on.link(n,r))}t.chain.get.next=function(n,e){var t;return Object.plain(e)?(t=((t=e["#"])||"")["="]||t)?n.get(t):((t=n.chain()._).lex=e,n.on("in",function(n){String.match(n.get||(n.put||"")["."],e["."]||e["#"]||e)&&t.on("in",n),this.to.next(n)}),t.$):(r||a)(n,e)},t.chain.map=function(n,e,r){var s,c,u=this,A=u._;return Object.plain(n)&&(s=n["."]?n:{".":n},n=i),n?(t.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),c=u.chain(),u.map().on(function(e,r,o,s){var u=(n||a).call(this,e,r,o,s);if(i!==u){if(e===u)return c._.on("in",o);if(t.is(u))return c._.on("in",u._);var A={};Object.keys(o.put).forEach(function(n){A[n]=o.put[n]},A),A["="]=u,c._.on("in",{get:r,put:A})}}),c):((c=A.each)||((A.each=c=u.chain())._.lex=s||c._.lex||A.lex,c._.nix=u.back("nix"),u.on("in",o,c._)),c)};var i,a=function(){}})(e,"./map"),e(function(n){var t=e("./index");t.chain.set=function(n,e,r){var o,i,a=this,s=a.back(-1);return e=e||function(){},(r=r||{}).item=r.item||n,(o=((n||"")._||"")["#"])&&((n={})["#"]=o),"string"==typeof(i=t.valid(n))?a.get(o=i).put(n,e,r):t.is(n)?(a.put(function(r){n.get(function(n,o,s){if(!n)return e.call(a,{err:t.log('Only a node can be linked! Not "'+s.put+'"!')});(i={})[n]={"#":n},r(i)},!0)}),n):(Object.plain(n)&&(n=s.get(o=a.back("opt.uuid")()).put(n)),a.get(o||s.back("opt.uuid")(7)).put(n,e,r))}})(e,"./set"),e(function(n){e("./shim");var t,r=function(){},o=JSON.parseAsync||function(n,e,t){var r=+new Date;try{e(void 0,JSON.parse(n,t),i.sucks(+new Date-r))}catch(n){e(n)}},i=JSON.stringifyAsync||function(n,e,t,r){var o=+new Date;try{e(void 0,JSON.stringify(n,t,r),i.sucks(+new Date-o))}catch(n){e(n)}};i.sucks=function(n){n>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),i.sucks=r)};try{n.exports=function(n){var e=function(){},r=n.opt||{};r.log=r.log||console.log,r.gap=r.gap||r.wait||0,r.max=r.max||.3*(r.memory?999*r.memory*999:3e8),r.pack=r.pack||.01*r.max*.01,r.puff=r.puff||9;var a=setTimeout.turn||setTimeout,s=n.dup,c=s.check,u=s.track,A=(new Date,e.hear=function(n,t){if(n){if(r.max<=n.length)return e.say({dam:"!",err:"Message too big!"},t);e===this&&(A.d+=n.length||0,++A.c);var i,s=t.SH=+new Date,c=n[0];return"["===c?(o(n,function(n,o){if(n||!o)return e.say({dam:"!",err:"DAM JSON parse error."},t);console.STAT&&console.STAT(+new Date,o.length,"# on hear batch");var i=r.puff;!function n(){for(var r,s=+new Date,c=0;c<i&&(r=o[c++]);)e.hear(r,t);o=o.slice(c),console.STAT&&console.STAT(s,+new Date-s,"hear loop"),l(t),o.length&&a(n,0)}()}),void(n="")):"{"===c||(n["#"]||Object.plain(n))&&(i=n)?i?A.one(i,t,s):void o(n,function(n,r){if(n||!r)return e.say({dam:"!",err:"DAM JSON parse error."},t);A.one(r,t,s)}):void 0}});function l(n){var e=n.batch,t="string"==typeof e;if(t&&(e+="]"),n.batch=n.tail=null,e&&!(t?3>e.length:!e.length)){if(!t)try{e=1===e.length?e[0]:JSON.stringify(e)}catch(n){return r.log("DAM JSON stringify error",n)}e&&d(e,n)}}function d(n,t){try{var r=t.wire;t.say?t.say(n):r.send&&r.send(n),e.say.d+=n.length||0,++e.say.c}catch(e){(t.queue=t.queue||[]).push(n)}}A.one=function(t,r,o){var i,a,A,l,d;if(t.DBG&&(t.DBG=d={DBG:t.DBG}),d&&(d.h=o),d&&(d.hp=+new Date),(i=t["#"])||(i=t["#"]=String.random(9)),!((A=c(i))||(a=t["##"])&&(A=t["@"]||t.get&&i)&&s.check(l=A+a))){if((t._=function(){}).via=e.leap=r,(A=t["><"])&&"string"==typeof A&&A.slice(0,99).split(",").forEach(function(n){this[n]=1},t._.yo={}),A=t.dam)return(A=e.hear[A])&&A(t,r,n),void u(i);(A=t.ok)&&(t._.near=A["/"]),o=+new Date,d&&(d.is=o),r.SI=i,u.ed=function(n){i===n&&(u.ed=0,(n=s.s[i])&&(n.via=r,t.get&&(n.it=t)))},n.on("in",e.last=t),d&&(d.hd=+new Date),console.STAT&&console.STAT(o,+new Date-o,t.get?"msg get":t.put?"msg put":"msg"),u(i),l&&u(l),e.leap=e.last=null}},A.c=A.d=0,function(){var n,o=0;function A(n,e){var t;return e instanceof Object?(Object.keys(e).sort().forEach(f,{to:t={},on:e}),t):e}function f(n){this.to[n]=this.on[n]}e.hash=function(n,t){var r,o,s,c=+new Date;i(n.put,function i(u,A){var l=(o||(o=s=A||"")).slice(0,32768);r=String.hash(l,r),(o=o.slice(32768))?a(i,0):(console.STAT&&console.STAT(c,+new Date-c,"say json+hash"),n._.$put=s,n["##"]=r,e.say(n,t),delete n._.$put)},A)},(e.say=function(i,c){var A;if((A=this)&&(A=A.to)&&A.next&&A.next(i),!i)return!1;var f,p,h,g=i["@"],m=i._||(i._=function(){}),v=i.DBG,b=+new Date;if(m.y=m.y||b,c||v&&(v.y=b),(f=i["#"])||(f=i["#"]=String.random(9)),!n&&u(f),(p=i["##"])||t===i.put||m.via||!g){if(!c&&g&&(c=(A=s.s[g])&&(A.via||(A=A.it)&&(A=A._)&&A.via)||(A=e.last)&&g===A["#"]&&e.leap),!c&&g){if(s.s[g])return;return console.STAT&&console.STAT(+new Date,++o,"total no peer to ack to"),!1}if(g&&!i.put&&!p&&((s.s[g]||"").it||"")["##"])return!1;if(!c&&e.way)return e.way(i);if(v&&(v.yh=+new Date),h=m.raw){if(v&&(v.yr=+new Date),!c||!c.id){if(!Object.plain(c||r.peers))return!1;b=+new Date,r.puff;var B=r.peers,C=Object.keys(c||r.peers||{});return console.STAT&&console.STAT(b,+new Date-b,"peer keys"),void function t(){var r=+new Date;n=1;var o=m.raw;m.raw=h;for(var s,A=0;A<9&&(s=(C||"")[A++]);)(s=B[s]||(c||"")[s])&&e.say(i,s);m.raw=o,n=0,C=C.slice(A),console.STAT&&console.STAT(r,+new Date-r,"say loop"),C.length&&(a(t,0),g&&u(g))}()}if(!c.wire&&e.wire&&e.wire(c),f!==c.last){if(c.last=f,c===m.via)return!1;if((A=m.yo)&&(A[c.url]||A[c.pid]||A[c.id]))return!1;if(console.STAT&&console.STAT(b,((v||m).yp=+new Date)-(m.y||b),"say prep"),!n&&g&&u(g),c.batch){if(c.tail=(A=c.tail||0)+h.length,c.tail<=r.pack)return void(c.batch+=(A?",":"")+h);l(c)}c.batch="[";var y=+new Date;setTimeout(function(){console.STAT&&console.STAT(y,+new Date-y,"0ms TO"),l(c)},r.gap),d(h,c),console.STAT&&g===c.SI&&console.STAT(b,+new Date-c.SH,"say ack")}}else e.raw(i,c)}else e.hash(i,c)}).c=e.say.d=0,e.raw=function(n,o){if(!n)return"";var a,u,A=n._||{};if(u=A.raw)return u;if("string"==typeof n)return n;var l=n["##"],d=n["@"];if(l&&d){if(!A.via&&c(d+l))return!1;if(u=(s.s[d]||"").it){if(l===u["##"])return!1;u["##"]||(u["##"]=l)}}if(!n.dam&&!n["@"]){var f=0,p=[];for(var h in u=r.peers){var g=u[h];if(p.push(g.url||g.pid||g.id),++f>6)break}f>1&&(n["><"]=p.join())}if(n.put&&(u=n.ok)&&(n.ok={"@":(u["@"]||1)-1,"/":u["/"]==n._.near?e.near:u["/"]}),a=A.$put)return u={},Object.keys(n).forEach(function(e){u[e]=n[e]}),u.put=":])([:",void i(u,function(n,e){if(!n){var r=+new Date;u=e.indexOf('"put":":])([:"'),m(t,e=e.slice(0,u+6)+a+e.slice(u+14)),console.STAT&&console.STAT(r,+new Date-r,"say slice")}});function m(t,r){t||(A.raw=r,e.say(n,o))}i(n,m)}}(),e.near=0,e.hi=function(t){var o;t.wire?(t.id?r.peers[t.url||t.id]=t:(o=t.id=t.id||t.url||String.random(9),e.say({dam:"?",pid:n.opt.pid},r.peers[o]=t),delete s.s[t.last]),t.met||(e.near++,t.met=+new Date,n.on("hi",t)),o=t.queue,t.queue=[],setTimeout.each(o||[],function(n){d(n,t)},0,9)):e.wire(t.length&&{url:t,id:t}||t)},e.bye=function(t){t.met&&--e.near,delete t.met,n.on("bye",t);var r=+new Date;r-=t.met||r,e.bye.time=((e.bye.time||r)+r)/2},e.hear["!"]=function(n,e){r.log("Error:",n.err)},e.hear["?"]=function(n,t){n.pid&&(t.pid||(t.pid=n.pid),n["@"])||(e.say({dam:"?",pid:r.pid,"@":n["#"]},t),delete s.s[t.last])},e.hear.mob=function(n,t){if(n.peers){var r=Object.keys(n.peers),o=r[Math.random()*r.length|0];o&&(e.bye(t),e.hi(o))}},n.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",e.say)}),n.on("bye",function(n,e){n=r.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(e=n.wire)&&e.close&&e.close(),delete r.peers[n.id],n.wire=null});var f={};return n.on("bye",function(n,t){this.to.next(n),(t=console.STAT)&&(t.peers=e.near),(t=n.url)&&(f[t]=!0,setTimeout(function(){delete f[t]},r.lack||9e3))}),n.on("hi",function(t,o){if(this.to.next(t),(o=console.STAT)&&(o.peers=e.near),!r.super){var i=Object.keys(n.next||"");i.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(i,function(o){var i=n.next[o];r.super||(i.ask||"")[""]?e.say({get:{"#":o}},t):setTimeout.each(Object.keys(i.ask||""),function(r){r&&e.say({"##":String.hash((n.graph[o]||"")[r]),get:{"#":o,".":r}},t)})})}}),e}}catch(n){}})(e,"./mesh"),e(function(n){var t=e("./index");t.Mesh=e("./mesh"),t.on("opt",function(n){if(this.to.next(n),!n.once){var e=n.opt;if(!1!==e.WebSocket){var r=t.window||{},o=e.WebSocket||r.WebSocket||r.webkitWebSocket||r.mozWebSocket;if(o){e.WebSocket=o;var i=e.mesh=e.mesh||t.Mesh(n);i.wire||e.wire,i.wire=e.wire=c,setTimeout(function(){!e.super&&n.on("out",{dam:"hi"})},1);var a=1998,s=""+void 0!=typeof document&&document}}}function c(n){try{if(!n||!n.url)return r&&r(n);var t=n.url.replace(/^http/,"ws"),r=n.wire=new e.WebSocket(t);return r.onclose=function(){u(n),e.mesh.bye(n)},r.onerror=function(e){u(n)},r.onopen=function(){e.mesh.hi(n)},r.onmessage=function(t){t&&e.mesh.hear(t.data||t,n)},r}catch(t){e.mesh.bye(n)}}function u(n){clearTimeout(n.defer),e.peers[n.url]&&(s&&n.retry<=0||(n.retry=(n.retry||e.retry+1||60)-(-n.tried+(n.tried=+new Date)<4*a?1:0),n.defer=setTimeout(function e(){if(s&&s.hidden)return setTimeout(e,a);c(n)},a)))}})})(e,"./websocket"),e(function(n){if("undefined"!=typeof Gun){var e;try{e=(Gun.window||function(){}).localStorage}catch(n){}e||(Gun.log("Warning: No localStorage exists to persist data to!"),e={setItem:function(n,e){this[n]=e},removeItem:function(n){delete this[n]},getItem:function(n){return this[n]}}),JSON.parseAsync;var t=JSON.stringifyAsync||function(n,e,t,r){try{e(void 0,JSON.stringify(n,t,r))}catch(n){e(n)}};Gun.on("create",function n(r){this.to.next(r);var o,i,a,s,c=r.opt,u=(r.graph,[]);if(!1!==c.localStorage){c.prefix=c.file||"gun/";try{o=n[c.prefix]=n[c.prefix]||JSON.parse(a=e.getItem(c.prefix))||{}}catch(e){o=n[c.prefix]={}}a=(a||"").length,r.on("get",function(n){this.to.next(n);var e,t,r,i=n.get;i&&(e=i["#"])&&((t=o[e]||void 0)&&(r=i["."])&&!Object.plain(r)&&(t=Gun.state.ify({},r,Gun.state.is(t,r),t[r],e)),Gun.on.get.ack(n,t))}),r.on("put",function(n){this.to.next(n);var e=n.put,t=e["#"],c=e["."],l=n["#"],d=n.ok||"";(r.next||"")[t]&&(o[t]=Gun.state.ify(o[t],c,e[">"],e[":"],t),s&&a>4999880?r.on("in",{"@":l,err:"localStorage max!"}):(n["@"]||n._.via&&!(Math.random()<d["@"]/d["/"])||u.push(l),i||(i=setTimeout(A,9+a/333))))})}function A(){if(u.length||!((setTimeout.turn||"").s||"").length){var n=u;clearTimeout(i),i=!1,u=[],t(o,function(t,i){try{!t&&e.setItem(c.prefix,i)}catch(n){t=s=n||"localStorage failure"}t&&(Gun.log(t+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),r.on("localStorage:error",{err:t,get:c.prefix,put:o})),a=i.length,setTimeout.each(n,function(n){r.on("in",{"@":n,err:t,ok:0})},0,99)})}else setTimeout(A,99)}})}})(e,"./localStorage")}(),function(){if(""+y!=typeof Gun){var n=function(n){console.warn("Warning! Deprecated internal utility will break in next version:",n)},e=Gun;e.fn=e.fn||{is:function(e){return n("fn"),!!e&&"function"==typeof e}},e.bi=e.bi||{is:function(e){return n("bi"),e instanceof Boolean||"boolean"==typeof e}},e.num=e.num||{is:function(e){return n("num"),!r(e)&&(e-parseFloat(e)+1>=0||1/0===e||-1/0===e)}},e.text=e.text||{is:function(e){return n("text"),"string"==typeof e}},e.text.ify=e.text.ify||function(t){return n("text.ify"),e.text.is(t)?t:"undefined"!=typeof JSON?JSON.stringify(t):t&&t.toString?t.toString():t},e.text.random=e.text.random||function(e,t){n("text.random");var r="";for(e=e||24,t=t||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";e>0;)r+=t.charAt(Math.floor(Math.random()*t.length)),e--;return r},e.text.match=e.text.match||function(e,t){var r,o;return n("text.match"),"string"==typeof e&&("string"==typeof t&&(t={"=":t}),e===(r=(t=t||{})["="]||t["*"]||t[">"]||t["<"])||o===t["="]&&(r=t["*"]||t[">"]||t["<"],e.slice(0,(r||"").length)===r||o===t["*"]&&(o!==t[">"]&&o!==t["<"]?e>=t[">"]&&e<=t["<"]:o!==t[">"]&&e>=t[">"]||o!==t["<"]&&e<=t["<"])))},e.text.hash=e.text.hash||function(e,t){if(n("text.hash"),"string"==typeof e){if(t=t||0,!e.length)return t;for(var r=0,o=e.length;r<o;++r)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}},e.list=e.list||{is:function(e){return n("list"),e instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(e){return n("list.sort"),function(n,t){return n&&t?(n=n[e])<(t=t[e])?-1:n>t?1:0:0}},e.list.map=e.list.map||function(e,t,r){return n("list.map"),a(e,t,r)},e.list.index=1,e.obj=e.boj||{is:function(e){return n("obj"),!!e&&(e instanceof Object&&e.constructor===Object||"Object"===Object.prototype.toString.call(e).match(/^\[object (\w+)\]$/)[1])}},e.obj.put=e.obj.put||function(e,t,r){return n("obj.put"),(e||{})[t]=r,e},e.obj.has=e.obj.has||function(e,t){return n("obj.has"),e&&Object.prototype.hasOwnProperty.call(e,t)},e.obj.del=e.obj.del||function(e,t){if(n("obj.del"),e)return e[t]=null,delete e[t],e},e.obj.as=e.obj.as||function(e,t,r,o){return n("obj.as"),e[t]=e[t]||(o===r?{}:r)},e.obj.ify=e.obj.ify||function(e){if(n("obj.ify"),o(e))return e;try{e=JSON.parse(e)}catch(n){e={}}return e},function(){function t(n,e){i(this,e)&&void 0!==this[e]||(this[e]=n)}e.obj.to=e.obj.to||function(e,r){return n("obj.to"),a(e,t,r=r||{}),r}}(),e.obj.copy=e.obj.copy||function(e){return n("obj.copy"),e?JSON.parse(JSON.stringify(e)):e},function(){function t(n,e){var t=this.n;if(!t||!(e===t||o(t)&&i(t,e)))return void 0!==e||void 0}e.obj.empty=e.obj.empty||function(e,r){return n("obj.empty"),!e||!a(e,t,{n:r})}}(),function(){function t(n,e){if(2===arguments.length)return t.r=t.r||{},void(t.r[n]=e);t.r=t.r||[],t.r.push(n)}var a,s=Object.keys;Object.keys=Object.keys||function(n){return a(n,function(n,e,t){t(e)})},e.obj.map=a=e.obj.map||function(a,c,u){n("obj.map");var A,l,d,f,p,h=0,g="function"==typeof c;if(t.r=A,s&&o(a)&&(f=s(a),p=!0),u=u||{},r(a)||f)for(l=(f||a).length;h<l;h++){var m=h+e.list.index;if(g){if((d=p?c.call(u,a[f[h]],f[h],t):c.call(u,a[h],m,t))!==A)return d}else if(c===a[p?f[h]:h])return f?f[h]:m}else for(h in a)if(g){if(i(a,h)&&(d=u?c.call(u,a[h],h,t):c(a[h],h,t))!==A)return d}else if(c===a[h])return h;return g?t.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(e){return n("time"),e?e instanceof Date:+(new Date).getTime()};var t=e.fn.is,r=e.list.is,o=(C=e.obj).is,i=C.has,a=C.map,s={is:function(e){return n("val.is"),e!==y&&(null===e||e!==1/0&&(!!(l(e)||u(e)||A(e))||s.link.is(e)||!1))}};s.link=s.rel={_:"#"},function(){function e(n,e){var t=this;return t.id?t.id=!1:e==c&&l(n)?void(t.id=n):t.id=!1}s.link.is=function(t){if(n("val.link.is"),t&&t[c]&&!t._&&o(t)){var r={};if(a(t,e,r),r.id)return r.id}return!1}}(),s.link.ify=function(e){return n("val.link.ify"),d({},c,e)},e.obj.has._=".";var c=s.link._,u=e.bi.is,A=e.num.is,l=e.text.is,d=(o=(C=e.obj).is,C.put);a=C.map,e.val=e.val||s;var f={_:"_",soul:function(e,t){return n("node.soul"),e&&e._&&e._[t||g]}};f.soul.ify=function(e,t){return n("node.soul.ify"),t="string"==typeof t?{soul:t}:t||{},(e=e||{})._=e._||{},e._[g]=t.soul||e._[g]||h(),e},f.soul._=s.link._,function(){function e(n,e){if(e!==f._)return!s.is(n)||void(this.cb&&this.cb.call(this.as,n,e,this.n,this.s))}f.is=function(t,r,i){var s;return n("node.is"),!!o(t)&&!!(s=f.soul(t))&&!a(t,e,{as:i,cb:r,s,n:t})}}(),function(){function e(n,e){var t,r=this.o;r.map?void 0===(t=r.map.call(this.as,n,""+e,r.node))?p(r.node,e):r.node&&(r.node[e]=t):s.is(n)&&(r.node[e]=n)}f.ify=function(t,r,o){return n("node.ify"),r?"string"==typeof r?r={soul:r}:"function"==typeof r&&(r={map:r}):r={},r.map&&(r.node=r.map.call(o,t,y,r.node||{})),(r.node=f.soul.ify(r.node||{},r))&&a(t,e,{o:r,as:o}),r.node}}(),o=(C=e.obj).is;var p=C.del,h=(a=C.map,e.text.random),g=f.soul._;e.node=e.node||f;var m=e.state;m.lex=function(){return n("state.lex"),m().toString(36).replace(".","")},m.to=function(e,t,r){n("state.to");var i=(e||{})[t];return o(i)&&(i=v(i)),m.ify(r,t,m.is(e,t),i,f.soul(e))},function(){function e(n,e){b!==e&&m.ify(this.o,e,this.s)}m.map=function(r,s,c){var u;n("state.map");var l=o(l=r||s)?l:null;return r=t(r=r||s)?r:null,l&&!r?(s=A(s)?s:m(),l[b]=l[b]||{},a(l,e,{o:l,s}),l):(c=c||o(s)?s:u,s=A(s)?s:m(),function(n,t,o,a){if(!r)return e.call({o,s},n,t),n;r.call(c||this||{},n,t,o,a),i(o,t)&&u===o[t]||e.call({o,s},n,t)})}}(),(C=e.obj).as,i=C.has,o=C.is,a=C.map;var v=C.copy,b=(A=e.num.is,t=e.fn.is,f._),B={};!function(){function e(n,e){if(!n||e!==f.soul(n)||!f.is(n,this.fn,this.as))return!0;this.cb&&(t.n=n,t.as=this.as,this.cb.call(t.as,n,e,t))}function t(n){n&&f.is(t.n,n,t.as)}B.is=function(t,r,i,s){return n("graph.is"),!(!t||!o(t)||x(t)||a(t,e,{cb:r,fn:i,as:s}))}}(),function(){function t(n,e){var t;return(t=function(n,e){for(var t,r=n.seen,o=r.length;o--;)if(t=r[o],e.obj===t.obj)return t;r.push(e)}(n,e))?t:(e.env=n,e.soul=a,f.ify(e.obj,r,e)&&(e.link=e.link||s.link.ify(f.soul(e.node)),e.obj!==n.shell&&(n.graph[s.link.is(e.link)]=e.node)),e)}function r(n,e,r){var o,a,u=this,A=u.env;if(f._===e&&i(n,s.link._))return r._;if(o=c(n,e,r,u,A)){if(e||(u.node=u.node||r||{},i(n,f._)&&f.soul(n)&&(u.node._=v(n._)),u.node=f.soul.ify(u.node,s.link.is(u.link)),u.link=u.link||s.link.ify(f.soul(u.node))),(a=A.map)&&(a.call(A.as||{},n,e,r,u),i(r,e))){if(n=r[e],y===n)return void p(r,e);if(!(o=c(n,e,r,u,A)))return}if(!e)return u.node;if(!0===o)return n;if((a=t(A,{obj:n,path:u.path.concat(e)})).node)return a.link}}function a(n){var e=this,t=s.link.is(e.link),r=e.env.graph;e.link=e.link||s.link.ify(n),e.link[s.link._]=n,e.node&&e.node[f._]&&(e.node[f._][s.link._]=n),i(r,t)&&(r[n]=r[t],p(r,t))}function c(n,t,r,i,a){var u;return!!s.is(n)||(o(n)?1:(u=a.invalid)?c(n=u.call(a.as||{},n,t,r),t,r,i,a):(a.err="Invalid value at '"+i.path.concat(t).join(".")+"'!",void(e.list.is(n)&&(a.err+=" Use `.set(item)` instead of an Array."))))}B.ify=function(e,r,o){n("graph.ify");var i={path:[],obj:e};return r?"string"==typeof r?r={soul:r}:"function"==typeof r&&(r.map=r):r={},"string"==typeof o&&(r.soul=r.soul||o,o=y),r.soul&&(i.link=s.link.ify(r.soul)),r.shell=(o||{}).shell,r.graph=r.graph||{},r.seen=r.seen||[],r.as=r.as||o,t(r,i),r.root=i.node,r.graph}}(),B.node=function(e){n("graph.node");var t=f.soul(e);if(t)return d({},t,e)},function(){function e(n,e){var t,r;if(f._!==e)(t=s.link.is(n))?(r=this.opt.seen[t])?this.obj[e]=r:this.obj[e]=this.opt.seen[t]=B.to(this.graph,t,this.opt):this.obj[e]=n;else{if(x(n,s.link._))return;this.obj[e]=v(n)}}B.to=function(t,r,o){if(n("graph.to"),t){var i={};return o=o||{seen:{}},a(t[r],e,{obj:i,graph:t,opt:o}),i}}}(),t=e.fn.is,o=(C=e.obj).is,p=C.del,i=C.has;var C,y,x=C.empty;d=C.put,a=C.map,v=C.copy,e.graph=e.graph||B}}()}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return n[r](i,i.exports,t),i.loaded=!0,i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),t.nc=void 0,(()=>{"use strict";var n=t(72),e=t.n(n),r=t(825),o=t.n(r),i=t(659),a=t.n(i),s=t(56),c=t.n(s),u=t(540),A=t.n(u),l=t(113),d=t.n(l),f=t(214),p={};p.styleTagTransform=d(),p.setAttributes=c(),p.insert=a().bind(null,"head"),p.domAPI=o(),p.insertStyleElement=A(),e()(f.A,p),f.A&&f.A.locals&&f.A.locals;var h=t(229),g=t.n(h),m=t(7);class v extends m.EventEmitter{gun;peers;connected=!1;constructor(){super(),this.peers=["ws://localhost:8080/gun"]}async initialize(){try{this.gun=g()({peers:this.peers,localStorage:!0,radisk:!1}),this.setupEventHandlers(),this.connected=!0,console.log(" Gun.js web service initialized")}catch(n){throw console.error("Failed to initialize Gun.js web service:",n),n}}setupEventHandlers(){this.gun.on("hi",n=>{console.log(" Gun.js peer connected:",n.id||"unknown")}),this.gun.on("bye",n=>{console.log(" Gun.js peer disconnected:",n.id||"unknown")})}getGun(){return this.gun}async put(n,e){return new Promise((t,r)=>{this.gun.get(n).put(e,n=>{n.err?r(new Error(n.err)):t()})})}async get(n){return new Promise((e,t)=>{let r;const o=this.gun.get(n).once(o=>{clearTimeout(r),void 0===o?t(new Error(`No data found for key: ${n}`)):e(o)});r=setTimeout(()=>{o.off(),t(new Error(`Timeout getting data for key: ${n}`))},3e3)})}subscribe(n,e){const t=this.gun.get(n).on(n=>{e(n),this.emit("newMessage",n)});return()=>t.off()}isConnected(){return this.connected}}class b{static blurLocation(n){return{region:`region_${Math.floor(100*n.latitude)/100}_${Math.floor(100*n.longitude)/100}`,chatrooms:[],trueLocation:n}}static generateChatroomId(n,e){return`${n}_room_${Math.floor(e/50)}`}static calculateDistance(n,e){const t=n.latitude*Math.PI/180,r=e.latitude*Math.PI/180,o=(e.latitude-n.latitude)*Math.PI/180,i=(e.longitude-n.longitude)*Math.PI/180,a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t)*Math.cos(r)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371e3}static isInRegion(n,e){return this.blurLocation(n).region===e}static getNearbyRegions(n,e=1){const t=n.match(/region_(-?\d+(?:\.\d+)?)_(-?\d+(?:\.\d+)?)/);if(!t)return[n];const[,r,o]=t,i=parseFloat(r),a=parseFloat(o),s=[n];for(let n=-e;n<=e;n++)for(let t=-e;t<=e;t++){if(0===n&&0===t)continue;const e=(100*i+n)/100,r=(100*a+t)/100;s.push(`region_${e}_${r}`)}return s}static validatePrivacy(n){const e=["latitude","longitude","coords","position","location"],t=JSON.stringify(n);for(const n of e)if(t.includes(n)&&!t.includes("region_"))return!1;return!0}static getMockLocation(){return{latitude:40.7128,longitude:-74.006,accuracy:10,timestamp:new Date}}static async getCurrentLocation(){if("undefined"!=typeof globalThis&&"navigator"in globalThis&&"geolocation"in globalThis.navigator){const n=globalThis.navigator;return new Promise((e,t)=>{n.geolocation.getCurrentPosition(n=>{e({latitude:n.coords.latitude,longitude:n.coords.longitude,accuracy:n.coords.accuracy,timestamp:new Date})},n=>{t(new Error(`Location error: ${n.message}`))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})}return this.getMockLocation()}}const B={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var C,y=new Uint8Array(16);function x(){if(!C&&!(C="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C(y)}for(var I=[],w=0;w<256;++w)I.push((w+256).toString(16).slice(1));const k=function(n,e,t){if(B.randomUUID&&!e&&!n)return B.randomUUID();var r=(n=n||{}).random||(n.rng||x)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var o=0;o<16;++o)e[t+o]=r[o];return e}return function(n,e=0){return(I[n[e+0]]+I[n[e+1]]+I[n[e+2]]+I[n[e+3]]+"-"+I[n[e+4]]+I[n[e+5]]+"-"+I[n[e+6]]+I[n[e+7]]+"-"+I[n[e+8]]+I[n[e+9]]+"-"+I[n[e+10]]+I[n[e+11]]+I[n[e+12]]+I[n[e+13]]+I[n[e+14]]+I[n[e+15]]).toLowerCase()}(r)};class S{gunService;constructor(n){this.gunService=n}async createUser(n){const e=k(),t=new Date,r={id:e,stageName:n.stageName||"",profile:n.profile||[],reputation:{questionsAnswered:0,talksSent:0,matchesFound:0,friendsCount:0,mutualFriendsCount:0,starRating:3,reviewCount:0,ageVerified:!1,ageVerificationVotes:0,blockCount:0,isHidden:!1},location:n.location||{region:"",chatrooms:[]},languages:n.languages||["en"],interests:n.interests||[],createdAt:t,lastActive:t},o=n.headshot?{...r,headshot:n.headshot}:r;return await this.gunService.put(`users/${e}`,o),o}async getUser(n){return await this.gunService.get(`users/${n}`)}async updateUserLocation(n,e){const t=b.blurLocation(e);await this.gunService.put(`users/${n}/location`,t)}async setUserStatus(n,e){await this.gunService.put(`users/${n}/status`,{status:e,timestamp:new Date})}}class _{gunService;currentChatroomId;constructor(n){this.gunService=n}async findOptimalChatroom(n){const e=b.getNearbyRegions(b.blurLocation(n).region);return e[e.length-1]}async joinChatroom(n,e){this.currentChatroomId=n,await this.gunService.put(`chatrooms/${n}/users/${e}`,{joinedAt:new Date,isActive:!0})}async leaveChatroom(n,e){await this.gunService.put(`chatrooms/${n}/users/${e}`,{leftAt:new Date,isActive:!1})}async switchChatroom(n,e){this.currentChatroomId&&await this.leaveChatroom(this.currentChatroomId,n),await this.joinChatroom(e,n)}getCurrentChatroomId(){return this.currentChatroomId}}class E extends Error{field;constructor(n,e){super(n),this.field=e,this.name="ValidationError"}}class T extends Error{talkId;constructor(n,e){super(n),this.talkId=e,this.name="TalkStructureError"}}Error,Error,Error;class j{static validateDAGStructure(n){const e=new Set,t=new Set;for(const r of n.questions)if(!e.has(r.id)&&this.hasCycleDFS(r,n.questions,e,t))throw new T(`Talk contains a loop starting from question: ${r.id}`,n.id)}static hasCycleDFS(n,e,t,r){t.add(n.id),r.add(n.id);const o=this.getNextQuestionIds(n);for(const n of o){const o=e.find(e=>e.id===n);if(o)if(t.has(n)){if(r.has(n))return!0}else if(this.hasCycleDFS(o,e,t,r))return!0}return r.delete(n.id),!1}static getNextQuestionIds(n){const e=[];if(n.nextQuestionId&&e.push(n.nextQuestionId),n.branchingLogic)for(const t of n.branchingLogic)e.push(t.nextQuestionId);for(const t of n.answers)t.nextQuestionId&&e.push(t.nextQuestionId);return e}static validateTalk(n){if(!n.title?.trim())throw new E("Talk title is required");if(0===n.questions.length)throw new E("Talk must have at least one question");if(n.questions.length>20)throw new E("Talk cannot have more than 20 questions");for(const e of n.questions)this.validateQuestion(e);this.validateDAGStructure(n),"survey"===n.type&&this.validateSurveyTalk(n)}static validateQuestion(n){if(!n.text?.trim())throw new E(`Question text is required for question ${n.id}`);if(!n.text.endsWith("?"))throw new E(`Question must end with '?' for question ${n.id}`);if(0===n.answers.length)throw new E(`Question must have at least one answer: ${n.id}`);if(n.answers.length>10)throw new E(`Question cannot have more than 10 answers: ${n.id}`);if(!n.answers.some(n=>n.isIgnore))throw new E(`Question must have an "Ignore" option: ${n.id}`);for(const e of n.answers)this.validateAnswer(e,n.id)}static validateAnswer(n,e){if(!n.text?.trim())throw new E(`Answer text is required for answer ${n.id} in question ${e}`);if(!n.text.endsWith("."))throw new E(`Answer must end with '.' for answer ${n.id} in question ${e}`)}static validateSurveyTalk(n){if(0===n.questions.filter(n=>n.isAggregatable).length)throw new E("Survey talk must have at least one aggregatable question");if(n.questions.length>15)throw new E("Survey talk cannot have more than 15 questions")}}class ${static parseChatLine(n){const e=n.trim(),t=e.indexOf("?");if(-1===t)return null;const r=e.substring(0,t+1),o=e.substring(t+1).trim().split(";").map(n=>n.trim()).filter(n=>n.length>0).map(n=>n.endsWith(".")?n:n+".");return 0===o.length?null:{question:r.trim(),answers:o}}static createLinearTalk(n,e,t=[],r){const o=[];let i=0;for(const n of e){const t=this.parseChatLine(n);if(!t)continue;const r=`q_${i}`,a=[];for(let n=0;n<t.answers.length;n++){const r={id:`a_${i}_${n}`,text:t.answers[n],isTerminal:i===e.length-1,isIgnore:!1,isMatch:!1};i<e.length-1&&(r.nextQuestionId=`q_${i+1}`),a.push(r)}a.push({id:`a_${i}_ignore`,text:"Ignore.",isIgnore:!0,isTerminal:!0});const s={id:r,text:t.question,answers:a};i<e.length-1&&(s.nextQuestionId=`q_${i+1}`),o.push(s),i++}o.length>0&&o[o.length-1].answers.push({id:"a_final_match",text:"Let's talk in person.",isMatch:!0,isTerminal:!0});const a={id:`talk_${Date.now()}_${n}`,title:"Auto-captured Talk",authorId:n,type:"matching",isAdult:!1,language:"en",tags:t.map(n=>({id:n,name:n,category:"other",popularity:0})),questions:o,createdAt:new Date,isTemplate:!0,usageCount:0};return j.validateTalk(a),a}}class O{gunService;constructor(n){this.gunService=n}async createTalk(n){const e={id:n.id||k(),title:n.title||"",authorId:n.authorId||"",type:n.type||"matching",isAdult:n.isAdult||!1,language:n.language||"en",tags:n.tags||[],questions:n.questions||[],createdAt:new Date,isTemplate:n.isTemplate||!1,usageCount:0};return await this.gunService.put(`talks/${e.id}`,e),e}async sendBulkTalk(n,e,t,r){const o={id:k(),talkId:n,senderId:e,targetScope:t,maxRecipients:r,sentCount:0,inProgressCount:0,matchedCount:0,ignoredCount:0,expiredCount:0,status:"pending",createdAt:new Date};return await this.gunService.put(`bulkJobs/${o.id}`,o),o}async processAnswer(n,e,t,r){const o={conversationId:n,questionId:e,answerId:t,userId:r,isComplete:!1,outcome:"continue"};return await this.gunService.put(`conversations/${n}/answers/${e}`,{answerId:t,userId:r,timestamp:new Date}),o}async sendMessage(n,e,t){await this.gunService.put(`conversations/${n}/messages/${Date.now()}`,{senderId:e,message:t,timestamp:new Date,isFromChatbot:!1})}checkForLinearCapture(n){const e=$.parseChatLine(n);return e?{question:e.question,answers:e.answers}:null}}class D extends m.EventEmitter{appContainer;initialize(){const n=document.getElementById("app");if(!n)throw new Error("App container not found");this.appContainer=n,this.setupBaseUI()}setupBaseUI(){this.appContainer&&(this.appContainer.innerHTML='\n      <div class="app-container">\n        <div class="sidebar">\n          <div class="header">\n            <div class="user-info" id="user-info"></div>\n          </div>\n          <div class="conversation-list" id="conversation-list">\n            <p>Loading conversations...</p>\n          </div>\n        </div>\n        <div class="main-content">\n          <div class="chatroom-info" id="chatroom-info">\n            <div class="chatroom-title">Loading...</div>\n            <div class="chatroom-status">Connecting...</div>\n          </div>\n          <div class="chat-area">\n            <div class="messages-container" id="messages-container">\n              <div class="text-center p-20">\n                <p>Welcome to IinPublic! Select a conversation or start a new talk.</p>\n              </div>\n            </div>\n            <div class="message-input-area">\n              <div class="message-input-container">\n                <textarea \n                  class="message-input" \n                  id="message-input" \n                  placeholder="Type a message or create a talk..."\n                  rows="1"\n                ></textarea>\n                <button class="send-button" id="send-button">\n                  <span></span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',this.setupEventListeners())}setupEventListeners(){const n=document.getElementById("send-button"),e=document.getElementById("message-input");n&&e&&(n.addEventListener("click",()=>{const n=e.value.trim();n&&(this.emit("sendMessage",{conversationId:"default",message:n}),e.value="")}),e.addEventListener("keypress",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n.click())}),e.addEventListener("input",()=>{e.style.height="auto",e.style.height=Math.min(e.scrollHeight,120)+"px"}))}showMainInterface(n){const e=document.getElementById("user-info");e&&(e.innerHTML=`\n        <div class="user-avatar">${n.stageName.charAt(0).toUpperCase()}</div>\n        <div>\n          <div><strong>${n.stageName}</strong></div>\n          <div style="font-size: 0.8em; color: #666;">Online</div>\n        </div>\n      `);const t=document.getElementById("chatroom-info");t&&(t.innerHTML='\n        <div class="chatroom-title">Global Chatroom</div>\n        <div class="chatroom-status">Connected  Ready to meet people nearby</div>\n      ')}async showUserCreationDialog(){return new Promise(n=>{const e=document.createElement("div");e.className="modal-overlay",e.innerHTML='\n        <div class="modal-content">\n          <div class="modal-header">\n            <h2 class="modal-title">Welcome to IinPublic!</h2>\n            <p>Let\'s set up your profile to get started.</p>\n          </div>\n          <form id="user-creation-form">\n            <div class="form-group">\n              <label class="form-label">Stage Name (required)</label>\n              <input type="text" class="form-input" id="stage-name" required \n                     placeholder="Choose a name others will see">\n            </div>\n            <div class="form-group">\n              <label class="form-label">Languages you understand</label>\n              <select class="form-input" id="languages" multiple>\n                <option value="en" selected>English</option>\n                <option value="es">Spanish</option>\n                <option value="fr">French</option>\n                <option value="de">German</option>\n              </select>\n            </div>\n            <div class="modal-actions">\n              <button type="submit" class="btn">Get Started</button>\n            </div>\n          </form>\n        </div>\n      ',document.body.appendChild(e);const t=document.getElementById("user-creation-form");t.addEventListener("submit",r=>{r.preventDefault();const o=new FormData(t).get("stage-name");o.trim()&&(document.body.removeChild(e),n({stageName:o.trim(),languages:["en"],interests:[]}))})})}displayNewMessage(n){const e=document.getElementById("messages-container");if(e){const t=document.createElement("div");t.className="message "+("current_user"===n.senderId?"sent":"received"),t.innerHTML=`\n        <div class="message-bubble">\n          ${n.text||n.message}\n          <div class="message-time">${(new Date).toLocaleTimeString()}</div>\n        </div>\n      `,e.appendChild(t),e.scrollTop=e.scrollHeight}}displayIncomingTalk(n){this.showNotification("New talk received!","info")}updateConversation(n,e){console.log("Conversation updated:",e)}updateChatroomInfo(n){console.log("Chatroom updated:",n)}updateUserInfo(n){const e=document.getElementById("user-info");e&&(e.innerHTML=`\n        <div class="user-avatar">${n.stageName.charAt(0).toUpperCase()}</div>\n        <div>\n          <div><strong>${n.stageName}</strong></div>\n          <div style="font-size: 0.8em; color: #666;">Online</div>\n        </div>\n      `)}showNotification(n,e="info"){const t=document.createElement("div");t.className=`notification ${e}`,t.textContent=n,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},3e3)}showTalkCompletion(n,e){this.showNotification(`Talk completed with outcome: ${e}`,"success")}showLinearCaptureInterface(n,e){this.showNotification("Auto-talk captured! You can reuse this later.","info")}refreshTalksList(){}}class L{gunService;userService;chatroomService;talkService;uiManager;currentUser;currentLocation;constructor(){this.gunService=new v,this.userService=new S(this.gunService),this.chatroomService=new _(this.gunService),this.talkService=new O(this.gunService),this.uiManager=new D}async initialize(n){this.currentLocation=n,await this.gunService.initialize(),this.uiManager.initialize(),await this.initializeUser(),await this.initializeChatrooms(),this.setupEventHandlers(),this.uiManager.showMainInterface(this.currentUser)}async initializeUser(){const n=localStorage.getItem("iinpublic_user_id");if(n)try{this.currentUser=await this.userService.getUser(n),console.log(" Existing user loaded:",this.currentUser.stageName)}catch(n){console.log(" Existing user not found, creating new user"),this.currentUser=await this.createNewUser()}else this.currentUser=await this.createNewUser();this.currentLocation&&await this.userService.updateUserLocation(this.currentUser.id,this.currentLocation)}async createNewUser(){const n=await this.uiManager.showUserCreationDialog(),e=b.blurLocation(this.currentLocation),t={stageName:n.stageName,headshot:n.headshot,location:e,languages:n.languages||["en"],interests:n.interests||[],profile:[]},r=await this.userService.createUser(t);return localStorage.setItem("iinpublic_user_id",r.id),console.log(" New user created:",r.stageName),r}async initializeChatrooms(){if(!this.currentUser||!this.currentLocation)return;const n=await this.chatroomService.findOptimalChatroom(this.currentLocation);await this.chatroomService.joinChatroom(n,this.currentUser.id),console.log(" Joined chatroom:",n)}setupEventHandlers(){this.uiManager.on("sendTalk",async n=>{try{await this.talkService.sendBulkTalk(n.talkId,this.currentUser.id,n.targetScope,n.maxRecipients),this.uiManager.showNotification("Talk sent successfully!","success")}catch(n){this.uiManager.showNotification("Failed to send talk: "+n.message,"error")}}),this.uiManager.on("createTalk",async n=>{try{await this.talkService.createTalk({...n,authorId:this.currentUser.id}),this.uiManager.showNotification("Talk created successfully!","success"),this.uiManager.refreshTalksList()}catch(n){this.uiManager.showNotification("Failed to create talk: "+n.message,"error")}}),this.uiManager.on("answerQuestion",async n=>{try{const e=await this.talkService.processAnswer(n.conversationId,n.questionId,n.answerId,this.currentUser.id);this.uiManager.updateConversation(n.conversationId,e),e.isComplete&&this.uiManager.showTalkCompletion(n.conversationId,e.outcome)}catch(n){this.uiManager.showNotification("Failed to process answer: "+n.message,"error")}}),this.uiManager.on("sendMessage",async n=>{try{const e=this.talkService.checkForLinearCapture(n.message);e?this.uiManager.showLinearCaptureInterface(n.conversationId,e):await this.talkService.sendMessage(n.conversationId,this.currentUser.id,n.message)}catch(n){this.uiManager.showNotification("Failed to send message: "+n.message,"error")}}),this.uiManager.on("requestLocationUpdate",async()=>{try{const n=await b.getCurrentLocation();if(this.currentLocation=n,this.currentUser){await this.userService.updateUserLocation(this.currentUser.id,n);const e=await this.chatroomService.findOptimalChatroom(n);e!==this.chatroomService.getCurrentChatroomId()&&(await this.chatroomService.switchChatroom(this.currentUser.id,e),this.uiManager.showNotification("Moved to new chatroom based on location","info"))}}catch(n){this.uiManager.showNotification("Failed to update location: "+n.message,"error")}}),this.gunService.on("newMessage",n=>{this.uiManager.displayNewMessage(n)}),this.gunService.on("newTalk",n=>{this.uiManager.displayIncomingTalk(n)}),this.gunService.on("chatroomUpdate",n=>{this.uiManager.updateChatroomInfo(n)}),document.addEventListener("visibilitychange",()=>{document.hidden?this.userService.setUserStatus(this.currentUser.id,"away"):this.userService.setUserStatus(this.currentUser.id,"online")}),window.addEventListener("beforeunload",()=>{this.currentUser&&this.userService.setUserStatus(this.currentUser.id,"offline")})}getCurrentUser(){return this.currentUser}getCurrentLocation(){return this.currentLocation}async refreshUserData(){this.currentUser&&(this.currentUser=await this.userService.getUser(this.currentUser.id),this.uiManager.updateUserInfo(this.currentUser))}async logout(){this.currentUser&&(await this.userService.setUserStatus(this.currentUser.id,"offline"),localStorage.removeItem("iinpublic_user_id"),this.currentUser=void 0,window.location.reload())}}class M{app;constructor(){this.app=new L}async initialize(){try{console.log(" Initializing IinPublic Web App");const n=await b.getCurrentLocation();console.log(" Location obtained:",n.latitude.toFixed(3),n.longitude.toFixed(3)),await this.app.initialize(n),console.log(" IinPublic Web App initialized successfully")}catch(n){console.error(" Failed to initialize app:",n),this.showError("Failed to initialize the app. Please refresh and try again.")}}showError(n){const e=document.getElementById("app");e&&(e.innerHTML=`\n        <div class="error-container">\n          <h1>Oops! Something went wrong</h1>\n          <p>${n}</p>\n          <button onclick="window.location.reload()">Retry</button>\n        </div>\n      `)}}document.addEventListener("DOMContentLoaded",async()=>{const n=new M;await n.initialize()})})()})();
//# sourceMappingURL=bundle.js.map